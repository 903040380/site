# gdw

- svgr ast 处理

- pupertee+lighthouse 实现自动化网站性能报告！！！

- 微前端！！！

- 通过 ast 监听 api 使用率

- 脚本自动更新微前端 script 文件的版本号

- useRequest 加 refresh 函数

## webpack4-5

Webpack5 新特性
基于前言部分，我们整个 webpack5 的升级工作是不进行汇报的，甚至如果别人不进一步询问技术细节，我们都不会提起 webpack。汇报的形式将以各种基于新特性的项目进行，在其中 webpack5 被视为我们必要的成本。为了能在明年申报更多我们感兴趣的项目，我们最早会在 Q4 支付成本。但不论是出于什么目的，了解它的新特性都是我们必要的工作。以下对特性做简要概括，具体的放在后续的升级设计方案中。

Webpack 4
Webpack 5
持久化缓存
默认没有持久化缓存，每次构建都会重新构建所有内容。
引入了内置的持久化缓存功能，可以显著提高二次构建的速度。它将缓存内容存储在文件系统中，减少了重复的计算。
更好的 Tree Shaking

支持 Tree Shaking，但某些场景下效果不理想。
改进了 Tree Shaking 的支持，可以更好地消除无用代码，并且支持多入口文件的 Tree Shaking。
模块联邦
不支持模块联邦
引入了模块联邦功能，使得不同的应用程序可以在运行时共享代码和依赖。
新的默认配置

需要手动配置 optimization.splitChunks 和 runtimeChunk 以优化输出的 JavaScript 文件。
默认配置更加优化，无需过多手动调整。
Webpack 5 会自动分割代码，并在可能的情况下减少代码体积。

依赖包的管理
依赖关系的处理相对简单，但在处理某些情况下可能会出现冲突。
引入了“确定性的模块 ID”和“持久化缓存”功能，确保在相同的内容下生成的哈希值一致，有助于长期缓存的优化。
WebAssembly 支持
支持 WebAssembly，但集成度不高。
增强了对 WebAssembly 的支持，允许与 JavaScript 更好地互操作。
资产模块
处理静态资源时，需要使用 file-loader、url-loader 等 loader。
引入了内置的资产模块处理，减少了对 file-loader 和 url-loader 的依赖，简化了配置。
废弃的插件 loader
支持许多插件和 loader，但一些老旧的功能逐渐被标记为废弃。
移除了许多废弃的 API 和功能，比如 Node.js polyfills（核心 Node.js 模块的 polyfills），并推荐使用现代的替代方案。
兼容性
由于兼容性考虑，许多过时的功能和模块依然保留，但在未来可能不再支持。
为了更好的性能和更简洁的配置，Webpack 5 对一些老旧功能进行了清理，可能需要对部分项目进行升级和调整。
改进的日志和报告
日志和错误报告有时不够详细，可能难以追踪问题。
改进了日志和错误报告，提供了更清晰的信息和更好的开发体验。
应用
显然，如果单以新特性汇报，很难让非开发者 get 到价值点，即使我们付出了很多时间和精力，也不会被认为是完成了一件什么重要的事情。完成这个升级只是一个起点，挖掘出基于新特性的、可以唤起非开发角色强烈共鸣的应用或者专项才是可以拿出来汇报的内容。

1.  Web 应用规模化发展中的性能瓶颈及优化策略研究
    基于 webpack5 中新的 treeshaking、静态资源优化等特性，可以解决我们当前功能越来越复杂的趋势下，性能和用户体验呈肉眼可见的下降的问题。

- milestone1: 制定升级方案并通过评审
- milestone2: FCP 1s 以内、LCP2s 以内
- milestone3: FCP 300ms 以内、LCP800ms 以内
- milestone4: 升级实施方案通过测试、验证并上线。
- milestone5: 推动客户调研、收集客户对于平台优化后使用体验相关的反馈建议。
  当然这个专题不仅与 webpack 有关，要达成所有里程碑，构建工具只是其中的一环。

2. 分布式架构下微前端架构组件即服务的研究
   基于 webpack5 Module Federation 这一全新特性，实现组件即服务的完全体微前端，更好的契合 WE 平台分布式架构。达成多人开发、独立部署、单一运行、自由组合的未来蓝图，降低业务开发与业务需求的耦合程度，运营人员可以通过自由组合来快速形成一个产品版本。

- milestone1: 构建、加载、协议、monorepo 等方案设计并通过评审。
- milestone2: webpack5 脚本编写完成且与 4 并行，可通过参数切换且于构建产物无感知。
- milestone3: 远程组件加载器基于 webpack5 Module Federation 特性完成升级，并保留对原使用方式的支持。
- milestone4: 完成对 renderRoutes、useMenu 等编排脚本的升级，并保留原使用方式。
- milestone5: 开发产品在线编排功能并上线
- milestone6: 设计页面级组件编排方案并通过评审
- milestone7: 通过组件级编排页面的方式上线功能并通过试运行
- milestone8: 介绍并推广以编排的方式组织产品或模块

3. 前端框架 3.0 - 2025 前端新一代全工具链
   基于 webpack5 的高性能，服务于生产力，结合整个开发周期的所有工具，对工具链进行升级。

- milestone1: 设计工具链升级方案并通过评审
- milestone2: 完成 react、webpack、antd、antv 等一系列库的升级，并在平台技术应用中完成切换
- milestone3: 完成切换前后的全面分析报告并汇报统计结果
- milestone4: 设计往期项目的切换及过渡的实施方案并开展培训

4. 面向视频处理的高性能模块研究
   基于 webpack5 WebAssembly 支持增强的特性，用高性能的语言编写视频处理模块并应用于 web 中，来提升用户在视频、监控等场景的使用体验。
5. WE 平台客户端方案预研
   面向未来终端场景需求，提前预研客户端实现方案。
