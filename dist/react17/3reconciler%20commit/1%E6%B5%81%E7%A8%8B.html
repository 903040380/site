<!doctype html>
<html>
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ZEROPRESS</title>
  <link rel="stylesheet" href="/assets/client-entry-Dj2YQCT4.css">
  <body>
    <div id="root"><header class="pc:fixed absolute left-0 top-0 z-50 w-full"><div class="border-divider bg-bg-default h-nav border-b px-[12px] pt-px transition-colors duration-300"><div class="flex h-full items-center justify-between"><div class="flex h-full justify-start"><div class="h-full"><nav class="mx-[12px] flex h-full items-center"><a class="cursor-pointer"><img src="/logo.jpg" class="h-[24px] w-[24px]"/></a></nav></div></div><div class="flex h-full justify-end"><div class="h-full"><nav class="mx-[12px] h-full justify-end"><a class="cursor-pointer text-text-2 text-hover flex h-full items-center whitespace-nowrap text-[14px] font-[500]">http</a></nav></div><div class="h-full"><nav class="mx-[12px] h-full justify-end"><a class="cursor-pointer text-brand text-hover flex h-full items-center whitespace-nowrap text-[14px] font-[500]">react17</a></nav></div><div class="h-full"><nav class="mx-[12px] h-full justify-end"><a class="cursor-pointer text-text-2 text-hover flex h-full items-center whitespace-nowrap text-[14px] font-[500]">数据结构与算法</a></nav></div><div class="h-full"><nav class="mx-[12px] h-full justify-end"><a class="cursor-pointer text-text-2 text-hover flex h-full items-center whitespace-nowrap text-[14px] font-[500]">设计模式</a></nav></div><div class="h-full"><nav class="mx-[12px] h-full justify-end"><a class="cursor-pointer text-text-2 text-hover flex h-full items-center whitespace-nowrap text-[14px] font-[500]">笔记</a></nav></div><div class="h-full"><nav class="mx-[12px] h-full justify-end"><a class="cursor-pointer text-text-2 text-hover flex h-full items-center whitespace-nowrap text-[14px] font-[500]">总结</a></nav></div><div class="h-full"><nav class="mx-[12px] h-full justify-end"><a class="cursor-pointer text-text-2 text-hover flex h-full items-center whitespace-nowrap text-[14px] font-[500]">收集</a></nav></div><div class="h-full"><nav class="mx-[12px] h-full justify-end"><a class="cursor-pointer text-text-2 text-hover flex h-full items-center whitespace-nowrap text-[14px] font-[500]">业务</a></nav></div><div class="h-full"><nav class="mx-[4px] flex h-full items-center"><button class="bg-bg-switch border-divider hover:border-gray-1 relative h-[22px] w-[40px] rounded-[11px] border transition-colors duration-300"><div class="bg-bg-inverse shadow-1 absolute left-px top-px h-[18px] w-[18px] overflow-hidden rounded-[50%] transition-all duration-300 dark:translate-x-[18px]"><span class="*:text-text-2 *:absolute *:left-[3px] *:top-[3px] *:h-[12px] *:w-[12px] *:transition-opacity *:duration-300"><div class="icon-[carbon--sun] opacity-100 dark:opacity-0"></div><div class="icon-[carbon--moon] opacity-0 dark:opacity-100"></div></span></div></button></nav></div><div class="h-full"><nav class="mx-[12px] h-full"><a href="https://github.com/houhongxu/hhxpress" class="cursor-pointer text-text-2 text-hover flex  h-full items-center"><span class="icon-[carbon--logo-github] h-[24px] w-[24px]"></span></a></nav></div></div></div></div></header><div class="pt-nav"><aside class="mt-nav w-sidebar border-divider bg-bg-sidebar pc:-translate-x-0 fixed inset-y-0 left-0 z-40 -translate-x-full overflow-y-auto border-r px-[28px] py-[16px] transition-transform duration-300"><div class="border-divider mt-[4px] border-t first:mt-0 first:border-t-0"><h2 class="text-text-1 mb-[6px] mt-[12px] flex cursor-pointer items-center justify-between font-[700]"><span>intro</span><span class="rotate-90 icon-[carbon--chevron-right] transition-transform duration-300"></span></h2><div style="height:108px" class="mb-[12px] flex flex-col overflow-hidden pl-[1rem] transition-[height] duration-300"><a class="cursor-pointer text-text-2 text-hover mb-[2px] overflow-hidden text-ellipsis whitespace-nowrap p-[2px] text-[14px]">流程</a><a class="cursor-pointer text-text-2 text-hover mb-[2px] overflow-hidden text-ellipsis whitespace-nowrap p-[2px] text-[14px]">架构</a><a class="cursor-pointer text-text-2 text-hover mb-[2px] overflow-hidden text-ellipsis whitespace-nowrap p-[2px] text-[14px]">fiber</a><a class="cursor-pointer text-text-2 text-hover mb-[2px] overflow-hidden text-ellipsis whitespace-nowrap p-[2px] text-[14px]">jsx</a></div></div><div class="border-divider mt-[4px] border-t first:mt-0 first:border-t-0"><h2 class="text-text-1 mb-[6px] mt-[12px] flex cursor-pointer items-center justify-between font-[700]"><span>reconciler render</span><span class="rotate-90 icon-[carbon--chevron-right] transition-transform duration-300"></span></h2><div style="height:162px" class="mb-[12px] flex flex-col overflow-hidden pl-[1rem] transition-[height] duration-300"><a class="cursor-pointer text-text-2 text-hover mb-[2px] overflow-hidden text-ellipsis whitespace-nowrap p-[2px] text-[14px]">流程</a><a class="cursor-pointer text-text-2 text-hover mb-[2px] overflow-hidden text-ellipsis whitespace-nowrap p-[2px] text-[14px]">mount阶段的beginWork</a><a class="cursor-pointer text-text-2 text-hover mb-[2px] overflow-hidden text-ellipsis whitespace-nowrap p-[2px] text-[14px]">mount阶段的completeWork</a><a class="cursor-pointer text-text-2 text-hover mb-[2px] overflow-hidden text-ellipsis whitespace-nowrap p-[2px] text-[14px]">update阶段的beginWork</a><a class="cursor-pointer text-text-2 text-hover mb-[2px] overflow-hidden text-ellipsis whitespace-nowrap p-[2px] text-[14px]">update阶段的completeWork</a><a class="cursor-pointer text-text-2 text-hover mb-[2px] overflow-hidden text-ellipsis whitespace-nowrap p-[2px] text-[14px]">进入commit()阶段</a></div></div><div class="border-divider mt-[4px] border-t first:mt-0 first:border-t-0"><h2 class="text-text-1 mb-[6px] mt-[12px] flex cursor-pointer items-center justify-between font-[700]"><span>reconciler commit</span><span class="rotate-90 icon-[carbon--chevron-right] transition-transform duration-300"></span></h2><div style="height:27px" class="mb-[12px] flex flex-col overflow-hidden pl-[1rem] transition-[height] duration-300"><a class="cursor-pointer text-brand text-hover mb-[2px] overflow-hidden text-ellipsis whitespace-nowrap p-[2px] text-[14px]">流程</a></div></div><div class="border-divider mt-[4px] border-t first:mt-0 first:border-t-0"><h2 class="text-text-1 mb-[6px] mt-[12px] flex cursor-pointer items-center justify-between font-[700]"><a class="cursor-pointer">readme</a></h2></div></aside><div class="pc:ml-sidebar ml-0 flex justify-between"><div class="mx-auto w-full max-w-[768px] transition-[margin] duration-300"><div class="h-nav pc:hidden bg-bg-default sticky top-0 z-50 w-full border-b"><div class="flex h-full items-center justify-between px-[24px]"><a class="icon-[carbon--list] h-[24px] w-[24px] cursor-pointer"></a><a class="icon-[carbon--border-top] h-[24px] w-[24px] cursor-pointer"></a></div><div class="fixed inset-0 bg-[#00000060] transition-all duration-300 opacity-0 invisible"></div><aside class="w-sidebar border-divider bg-bg-sidebar fixed inset-y-0 left-0 z-40 overflow-y-auto border-r px-[28px] py-[16px] transition-transform duration-300 -translate-x-full"><div class="border-divider mt-[4px] border-t first:mt-0 first:border-t-0"><h2 class="text-text-1 mb-[6px] mt-[12px] flex cursor-pointer items-center justify-between font-[700]"><span>intro</span><span class="rotate-90 icon-[carbon--chevron-right] transition-transform duration-300"></span></h2><div style="height:108px" class="mb-[12px] flex flex-col overflow-hidden pl-[1rem] transition-[height] duration-300"><a class="cursor-pointer text-text-2 text-hover mb-[2px] overflow-hidden text-ellipsis whitespace-nowrap p-[2px] text-[14px]">流程</a><a class="cursor-pointer text-text-2 text-hover mb-[2px] overflow-hidden text-ellipsis whitespace-nowrap p-[2px] text-[14px]">架构</a><a class="cursor-pointer text-text-2 text-hover mb-[2px] overflow-hidden text-ellipsis whitespace-nowrap p-[2px] text-[14px]">fiber</a><a class="cursor-pointer text-text-2 text-hover mb-[2px] overflow-hidden text-ellipsis whitespace-nowrap p-[2px] text-[14px]">jsx</a></div></div><div class="border-divider mt-[4px] border-t first:mt-0 first:border-t-0"><h2 class="text-text-1 mb-[6px] mt-[12px] flex cursor-pointer items-center justify-between font-[700]"><span>reconciler render</span><span class="rotate-90 icon-[carbon--chevron-right] transition-transform duration-300"></span></h2><div style="height:162px" class="mb-[12px] flex flex-col overflow-hidden pl-[1rem] transition-[height] duration-300"><a class="cursor-pointer text-text-2 text-hover mb-[2px] overflow-hidden text-ellipsis whitespace-nowrap p-[2px] text-[14px]">流程</a><a class="cursor-pointer text-text-2 text-hover mb-[2px] overflow-hidden text-ellipsis whitespace-nowrap p-[2px] text-[14px]">mount阶段的beginWork</a><a class="cursor-pointer text-text-2 text-hover mb-[2px] overflow-hidden text-ellipsis whitespace-nowrap p-[2px] text-[14px]">mount阶段的completeWork</a><a class="cursor-pointer text-text-2 text-hover mb-[2px] overflow-hidden text-ellipsis whitespace-nowrap p-[2px] text-[14px]">update阶段的beginWork</a><a class="cursor-pointer text-text-2 text-hover mb-[2px] overflow-hidden text-ellipsis whitespace-nowrap p-[2px] text-[14px]">update阶段的completeWork</a><a class="cursor-pointer text-text-2 text-hover mb-[2px] overflow-hidden text-ellipsis whitespace-nowrap p-[2px] text-[14px]">进入commit()阶段</a></div></div><div class="border-divider mt-[4px] border-t first:mt-0 first:border-t-0"><h2 class="text-text-1 mb-[6px] mt-[12px] flex cursor-pointer items-center justify-between font-[700]"><span>reconciler commit</span><span class="rotate-90 icon-[carbon--chevron-right] transition-transform duration-300"></span></h2><div style="height:27px" class="mb-[12px] flex flex-col overflow-hidden pl-[1rem] transition-[height] duration-300"><a class="cursor-pointer text-brand text-hover mb-[2px] overflow-hidden text-ellipsis whitespace-nowrap p-[2px] text-[14px]">流程</a></div></div><div class="border-divider mt-[4px] border-t first:mt-0 first:border-t-0"><h2 class="text-text-1 mb-[6px] mt-[12px] flex cursor-pointer items-center justify-between font-[700]"><a class="cursor-pointer">readme</a></h2></div></aside><div class="fixed inset-0  bg-[#00000060] transition-all duration-300 opacity-0 invisible"></div><aside class="w-toc border-divider bg-bg-sidebar fixed inset-y-0 right-0 z-40  h-full border-l px-[28px] py-[16px] transition-transform duration-300 translate-x-full"><div class="border-divider pc:border-l px-[16px] font-[500]"><div class="pc:block bg-brand absolute left-0 hidden h-[18px] w-px transition-[opacity,top] duration-300" style="top:33px;opacity:0"></div><div class="text-[14px] font-[600] leading-[28px]">本页目录</div><div><div><a href="#" class="text-text-2 text-hover block overflow-hidden text-ellipsis whitespace-nowrap text-[13px] leading-[28px]" style="padding-left:0rem"></a></div></div></div></aside></div><div class="p-[48px]"><div class="doc"><h1 id="流程"><a class="autolink-headings" href="#流程"><span style="margin-right:4px">#</span></a>流程</h1>
<figure data-rehype-pretty-code-figure=""><pre style="background-color:#fff;color:#24292e" tabindex="0" data-language="js" data-theme="github-light"><code data-language="js" data-theme="github-light" style="display:grid"><span data-line=""><span style="color:#D73A49">function</span><span style="color:#6F42C1"> commitRoot</span><span style="color:#24292E">(</span><span style="color:#E36209">root</span><span style="color:#24292E">) {</span></span>
<span data-line=""><span style="color:#D73A49">  var</span><span style="color:#24292E"> renderPriorityLevel </span><span style="color:#D73A49">=</span><span style="color:#6F42C1"> getCurrentPriorityLevel</span><span style="color:#24292E">()</span></span>
<span data-line=""><span style="color:#6F42C1">  runWithPriority$1</span><span style="color:#24292E">(</span></span>
<span data-line=""><span style="color:#24292E">    ImmediatePriority$1,</span></span>
<span data-line=""><span style="color:#24292E">    commitRootImpl.</span><span style="color:#6F42C1">bind</span><span style="color:#24292E">(</span><span style="color:#005CC5">null</span><span style="color:#24292E">, root, renderPriorityLevel),</span></span>
<span data-line=""><span style="color:#24292E">  )</span></span>
<span data-line=""><span style="color:#D73A49">  return</span><span style="color:#005CC5"> null</span></span>
<span data-line=""><span style="color:#24292E">}</span></span></code></pre></figure>
<figure data-rehype-pretty-code-figure=""><pre style="background-color:#fff;color:#24292e" tabindex="0" data-language="js" data-theme="github-light"><code data-language="js" data-theme="github-light" style="display:grid"><span data-line=""><span style="color:#D73A49">function</span><span style="color:#6F42C1"> commitRootImpl</span><span style="color:#24292E">(</span><span style="color:#E36209">root</span><span style="color:#24292E">, </span><span style="color:#E36209">renderPriorityLevel</span><span style="color:#24292E">) {</span></span>
<span data-line=""><span style="color:#D73A49">  do</span><span style="color:#24292E"> {</span></span>
<span data-line=""><span style="color:#6A737D">    // `flushPassiveEffects` will call `flushSyncUpdateQueue` at the end, which</span></span>
<span data-line=""><span style="color:#6A737D">    // means `flushPassiveEffects` will sometimes result in additional</span></span>
<span data-line=""><span style="color:#6A737D">    // passive effects. So we need to keep flushing in a loop until there are</span></span>
<span data-line=""><span style="color:#6A737D">    // no more pending effects.</span></span>
<span data-line=""><span style="color:#6A737D">    // TODO: Might be better if `flushPassiveEffects` did not automatically</span></span>
<span data-line=""><span style="color:#6A737D">    // flush synchronous work at the end, to avoid factoring hazards like this.</span></span>
<span data-line=""><span style="color:#6F42C1">    flushPassiveEffects</span><span style="color:#24292E">()</span></span>
<span data-line=""><span style="color:#24292E">  } </span><span style="color:#D73A49">while</span><span style="color:#24292E"> (rootWithPendingPassiveEffects </span><span style="color:#D73A49">!==</span><span style="color:#005CC5"> null</span><span style="color:#24292E">)</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#6F42C1">  flushRenderPhaseStrictModeWarningsInDEV</span><span style="color:#24292E">()</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#D73A49">  if</span><span style="color:#24292E"> (</span><span style="color:#D73A49">!</span><span style="color:#24292E">((executionContext </span><span style="color:#D73A49">&amp;</span><span style="color:#24292E"> (RenderContext </span><span style="color:#D73A49">|</span><span style="color:#24292E"> CommitContext)) </span><span style="color:#D73A49">===</span><span style="color:#24292E"> NoContext)) {</span></span>
<span data-line=""><span style="color:#24292E">    {</span></span>
<span data-line=""><span style="color:#D73A49">      throw</span><span style="color:#6F42C1"> Error</span><span style="color:#24292E">(</span><span style="color:#032F62">&#x27;Should not already be working.&#x27;</span><span style="color:#24292E">)</span></span>
<span data-line=""><span style="color:#24292E">    }</span></span>
<span data-line=""><span style="color:#24292E">  }</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#D73A49">  var</span><span style="color:#24292E"> finishedWork </span><span style="color:#D73A49">=</span><span style="color:#24292E"> root.finishedWork</span></span>
<span data-line=""><span style="color:#D73A49">  var</span><span style="color:#24292E"> lanes </span><span style="color:#D73A49">=</span><span style="color:#24292E"> root.finishedLanes</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#24292E">  {</span></span>
<span data-line=""><span style="color:#6F42C1">    markCommitStarted</span><span style="color:#24292E">(lanes)</span></span>
<span data-line=""><span style="color:#24292E">  }</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#D73A49">  if</span><span style="color:#24292E"> (finishedWork </span><span style="color:#D73A49">===</span><span style="color:#005CC5"> null</span><span style="color:#24292E">) {</span></span>
<span data-line=""><span style="color:#24292E">    {</span></span>
<span data-line=""><span style="color:#6F42C1">      markCommitStopped</span><span style="color:#24292E">()</span></span>
<span data-line=""><span style="color:#24292E">    }</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#D73A49">    return</span><span style="color:#005CC5"> null</span></span>
<span data-line=""><span style="color:#24292E">  }</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#24292E">  root.finishedWork </span><span style="color:#D73A49">=</span><span style="color:#005CC5"> null</span></span>
<span data-line=""><span style="color:#24292E">  root.finishedLanes </span><span style="color:#D73A49">=</span><span style="color:#24292E"> NoLanes</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#D73A49">  if</span><span style="color:#24292E"> (</span><span style="color:#D73A49">!</span><span style="color:#24292E">(finishedWork </span><span style="color:#D73A49">!==</span><span style="color:#24292E"> root.current)) {</span></span>
<span data-line=""><span style="color:#24292E">    {</span></span>
<span data-line=""><span style="color:#D73A49">      throw</span><span style="color:#6F42C1"> Error</span><span style="color:#24292E">(</span></span>
<span data-line=""><span style="color:#032F62">        &#x27;Cannot commit the same tree as before. This error is likely caused by a bug in React. Please file an issue.&#x27;</span><span style="color:#24292E">,</span></span>
<span data-line=""><span style="color:#24292E">      )</span></span>
<span data-line=""><span style="color:#24292E">    }</span></span>
<span data-line=""><span style="color:#24292E">  } </span><span style="color:#6A737D">// commitRoot never returns a continuation; it always finishes synchronously.</span></span>
<span data-line=""><span style="color:#6A737D">  // So we can clear these now to allow a new callback to be scheduled.</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#24292E">  root.callbackNode </span><span style="color:#D73A49">=</span><span style="color:#005CC5"> null</span><span style="color:#6A737D"> // Update the first and last pending times on this root. The new first</span></span>
<span data-line=""><span style="color:#6A737D">  // pending time is whatever is left on the root fiber.</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#D73A49">  var</span><span style="color:#24292E"> remainingLanes </span><span style="color:#D73A49">=</span><span style="color:#6F42C1"> mergeLanes</span><span style="color:#24292E">(finishedWork.lanes, finishedWork.childLanes)</span></span>
<span data-line=""><span style="color:#6F42C1">  markRootFinished</span><span style="color:#24292E">(root, remainingLanes) </span><span style="color:#6A737D">// Clear already finished discrete updates in case that a later call of</span></span>
<span data-line=""><span style="color:#6A737D">  // `flushDiscreteUpdates` starts a useless render pass which may cancels</span></span>
<span data-line=""><span style="color:#6A737D">  // a scheduled timeout.</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#D73A49">  if</span><span style="color:#24292E"> (rootsWithPendingDiscreteUpdates </span><span style="color:#D73A49">!==</span><span style="color:#005CC5"> null</span><span style="color:#24292E">) {</span></span>
<span data-line=""><span style="color:#D73A49">    if</span><span style="color:#24292E"> (</span></span>
<span data-line=""><span style="color:#D73A49">      !</span><span style="color:#6F42C1">hasDiscreteLanes</span><span style="color:#24292E">(remainingLanes) </span><span style="color:#D73A49">&amp;&amp;</span></span>
<span data-line=""><span style="color:#24292E">      rootsWithPendingDiscreteUpdates.</span><span style="color:#6F42C1">has</span><span style="color:#24292E">(root)</span></span>
<span data-line=""><span style="color:#24292E">    ) {</span></span>
<span data-line=""><span style="color:#24292E">      rootsWithPendingDiscreteUpdates.</span><span style="color:#6F42C1">delete</span><span style="color:#24292E">(root)</span></span>
<span data-line=""><span style="color:#24292E">    }</span></span>
<span data-line=""><span style="color:#24292E">  }</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#D73A49">  if</span><span style="color:#24292E"> (root </span><span style="color:#D73A49">===</span><span style="color:#24292E"> workInProgressRoot) {</span></span>
<span data-line=""><span style="color:#6A737D">    // We can reset these now that they are finished.</span></span>
<span data-line=""><span style="color:#24292E">    workInProgressRoot </span><span style="color:#D73A49">=</span><span style="color:#005CC5"> null</span></span>
<span data-line=""><span style="color:#24292E">    workInProgress </span><span style="color:#D73A49">=</span><span style="color:#005CC5"> null</span></span>
<span data-line=""><span style="color:#24292E">    workInProgressRootRenderLanes </span><span style="color:#D73A49">=</span><span style="color:#24292E"> NoLanes</span></span>
<span data-line=""><span style="color:#24292E">  } </span><span style="color:#6A737D">// Get the list of effects.</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#D73A49">  var</span><span style="color:#24292E"> firstEffect</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#D73A49">  if</span><span style="color:#24292E"> (finishedWork.flags </span><span style="color:#D73A49">&gt;</span><span style="color:#24292E"> PerformedWork) {</span></span>
<span data-line=""><span style="color:#6A737D">    // A fiber&#x27;s effect list consists only of its children, not itself. So if</span></span>
<span data-line=""><span style="color:#6A737D">    // the root has an effect, we need to add it to the end of the list. The</span></span>
<span data-line=""><span style="color:#6A737D">    // resulting list is the set that would belong to the root&#x27;s parent, if it</span></span>
<span data-line=""><span style="color:#6A737D">    // had one; that is, all the effects in the tree including the root.</span></span>
<span data-line=""><span style="color:#D73A49">    if</span><span style="color:#24292E"> (finishedWork.lastEffect </span><span style="color:#D73A49">!==</span><span style="color:#005CC5"> null</span><span style="color:#24292E">) {</span></span>
<span data-line=""><span style="color:#24292E">      finishedWork.lastEffect.nextEffect </span><span style="color:#D73A49">=</span><span style="color:#24292E"> finishedWork</span></span>
<span data-line=""><span style="color:#24292E">      firstEffect </span><span style="color:#D73A49">=</span><span style="color:#24292E"> finishedWork.firstEffect</span></span>
<span data-line=""><span style="color:#24292E">    } </span><span style="color:#D73A49">else</span><span style="color:#24292E"> {</span></span>
<span data-line=""><span style="color:#24292E">      firstEffect </span><span style="color:#D73A49">=</span><span style="color:#24292E"> finishedWork</span></span>
<span data-line=""><span style="color:#24292E">    }</span></span>
<span data-line=""><span style="color:#24292E">  } </span><span style="color:#D73A49">else</span><span style="color:#24292E"> {</span></span>
<span data-line=""><span style="color:#6A737D">    // There is no effect on the root.</span></span>
<span data-line=""><span style="color:#24292E">    firstEffect </span><span style="color:#D73A49">=</span><span style="color:#24292E"> finishedWork.firstEffect</span></span>
<span data-line=""><span style="color:#24292E">  }</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#D73A49">  if</span><span style="color:#24292E"> (firstEffect </span><span style="color:#D73A49">!==</span><span style="color:#005CC5"> null</span><span style="color:#24292E">) {</span></span>
<span data-line=""><span style="color:#D73A49">    var</span><span style="color:#24292E"> prevExecutionContext </span><span style="color:#D73A49">=</span><span style="color:#24292E"> executionContext</span></span>
<span data-line=""><span style="color:#24292E">    executionContext </span><span style="color:#D73A49">|=</span><span style="color:#24292E"> CommitContext</span></span>
<span data-line=""><span style="color:#D73A49">    var</span><span style="color:#24292E"> prevInteractions </span><span style="color:#D73A49">=</span><span style="color:#6F42C1"> pushInteractions</span><span style="color:#24292E">(root) </span><span style="color:#6A737D">// Reset this to null before calling lifecycles</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#24292E">    ReactCurrentOwner$2.current </span><span style="color:#D73A49">=</span><span style="color:#005CC5"> null</span><span style="color:#6A737D"> // The commit phase is broken into several sub-phases. We do a separate pass</span></span>
<span data-line=""><span style="color:#6A737D">    // of the effect list for each phase: all mutation effects come before all</span></span>
<span data-line=""><span style="color:#6A737D">    // layout effects, and so on.</span></span>
<span data-line=""><span style="color:#6A737D">    // The first phase a &quot;before mutation&quot; phase. We use this phase to read the</span></span>
<span data-line=""><span style="color:#6A737D">    // state of the host tree right before we mutate it. This is where</span></span>
<span data-line=""><span style="color:#6A737D">    // getSnapshotBeforeUpdate is called.</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#24292E">    focusedInstanceHandle </span><span style="color:#D73A49">=</span><span style="color:#6F42C1"> prepareForCommit</span><span style="color:#24292E">(root.containerInfo)</span></span>
<span data-line=""><span style="color:#24292E">    shouldFireAfterActiveInstanceBlur </span><span style="color:#D73A49">=</span><span style="color:#005CC5"> false</span></span>
<span data-line=""><span style="color:#24292E">    nextEffect </span><span style="color:#D73A49">=</span><span style="color:#24292E"> firstEffect</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#D73A49">    do</span><span style="color:#24292E"> {</span></span>
<span data-line=""><span style="color:#24292E">      {</span></span>
<span data-line=""><span style="color:#6F42C1">        invokeGuardedCallback</span><span style="color:#24292E">(</span><span style="color:#005CC5">null</span><span style="color:#24292E">, commitBeforeMutationEffects, </span><span style="color:#005CC5">null</span><span style="color:#24292E">)</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#D73A49">        if</span><span style="color:#24292E"> (</span><span style="color:#6F42C1">hasCaughtError</span><span style="color:#24292E">()) {</span></span>
<span data-line=""><span style="color:#D73A49">          if</span><span style="color:#24292E"> (</span><span style="color:#D73A49">!</span><span style="color:#24292E">(nextEffect </span><span style="color:#D73A49">!==</span><span style="color:#005CC5"> null</span><span style="color:#24292E">)) {</span></span>
<span data-line=""><span style="color:#24292E">            {</span></span>
<span data-line=""><span style="color:#D73A49">              throw</span><span style="color:#6F42C1"> Error</span><span style="color:#24292E">(</span><span style="color:#032F62">&#x27;Should be working on an effect.&#x27;</span><span style="color:#24292E">)</span></span>
<span data-line=""><span style="color:#24292E">            }</span></span>
<span data-line=""><span style="color:#24292E">          }</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#D73A49">          var</span><span style="color:#24292E"> error </span><span style="color:#D73A49">=</span><span style="color:#6F42C1"> clearCaughtError</span><span style="color:#24292E">()</span></span>
<span data-line=""><span style="color:#6F42C1">          captureCommitPhaseError</span><span style="color:#24292E">(nextEffect, error)</span></span>
<span data-line=""><span style="color:#24292E">          nextEffect </span><span style="color:#D73A49">=</span><span style="color:#24292E"> nextEffect.nextEffect</span></span>
<span data-line=""><span style="color:#24292E">        }</span></span>
<span data-line=""><span style="color:#24292E">      }</span></span>
<span data-line=""><span style="color:#24292E">    } </span><span style="color:#D73A49">while</span><span style="color:#24292E"> (nextEffect </span><span style="color:#D73A49">!==</span><span style="color:#005CC5"> null</span><span style="color:#24292E">) </span><span style="color:#6A737D">// We no longer need to track the active instance fiber</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#24292E">    focusedInstanceHandle </span><span style="color:#D73A49">=</span><span style="color:#005CC5"> null</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#24292E">    {</span></span>
<span data-line=""><span style="color:#6A737D">      // Mark the current commit time to be shared by all Profilers in this</span></span>
<span data-line=""><span style="color:#6A737D">      // batch. This enables them to be grouped later.</span></span>
<span data-line=""><span style="color:#6F42C1">      recordCommitTime</span><span style="color:#24292E">()</span></span>
<span data-line=""><span style="color:#24292E">    } </span><span style="color:#6A737D">// The next phase is the mutation phase, where we mutate the host tree.</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#24292E">    nextEffect </span><span style="color:#D73A49">=</span><span style="color:#24292E"> firstEffect</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#D73A49">    do</span><span style="color:#24292E"> {</span></span>
<span data-line=""><span style="color:#24292E">      {</span></span>
<span data-line=""><span style="color:#6F42C1">        invokeGuardedCallback</span><span style="color:#24292E">(</span></span>
<span data-line=""><span style="color:#005CC5">          null</span><span style="color:#24292E">,</span></span>
<span data-line=""><span style="color:#24292E">          commitMutationEffects,</span></span>
<span data-line=""><span style="color:#005CC5">          null</span><span style="color:#24292E">,</span></span>
<span data-line=""><span style="color:#24292E">          root,</span></span>
<span data-line=""><span style="color:#24292E">          renderPriorityLevel,</span></span>
<span data-line=""><span style="color:#24292E">        )</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#D73A49">        if</span><span style="color:#24292E"> (</span><span style="color:#6F42C1">hasCaughtError</span><span style="color:#24292E">()) {</span></span>
<span data-line=""><span style="color:#D73A49">          if</span><span style="color:#24292E"> (</span><span style="color:#D73A49">!</span><span style="color:#24292E">(nextEffect </span><span style="color:#D73A49">!==</span><span style="color:#005CC5"> null</span><span style="color:#24292E">)) {</span></span>
<span data-line=""><span style="color:#24292E">            {</span></span>
<span data-line=""><span style="color:#D73A49">              throw</span><span style="color:#6F42C1"> Error</span><span style="color:#24292E">(</span><span style="color:#032F62">&#x27;Should be working on an effect.&#x27;</span><span style="color:#24292E">)</span></span>
<span data-line=""><span style="color:#24292E">            }</span></span>
<span data-line=""><span style="color:#24292E">          }</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#D73A49">          var</span><span style="color:#24292E"> _error </span><span style="color:#D73A49">=</span><span style="color:#6F42C1"> clearCaughtError</span><span style="color:#24292E">()</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#6F42C1">          captureCommitPhaseError</span><span style="color:#24292E">(nextEffect, _error)</span></span>
<span data-line=""><span style="color:#24292E">          nextEffect </span><span style="color:#D73A49">=</span><span style="color:#24292E"> nextEffect.nextEffect</span></span>
<span data-line=""><span style="color:#24292E">        }</span></span>
<span data-line=""><span style="color:#24292E">      }</span></span>
<span data-line=""><span style="color:#24292E">    } </span><span style="color:#D73A49">while</span><span style="color:#24292E"> (nextEffect </span><span style="color:#D73A49">!==</span><span style="color:#005CC5"> null</span><span style="color:#24292E">)</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#6F42C1">    resetAfterCommit</span><span style="color:#24292E">(root.containerInfo) </span><span style="color:#6A737D">// The work-in-progress tree is now the current tree. This must come after</span></span>
<span data-line=""><span style="color:#6A737D">    // the mutation phase, so that the previous tree is still current during</span></span>
<span data-line=""><span style="color:#6A737D">    // componentWillUnmount, but before the layout phase, so that the finished</span></span>
<span data-line=""><span style="color:#6A737D">    // work is current during componentDidMount/Update.</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#24292E">    root.current </span><span style="color:#D73A49">=</span><span style="color:#24292E"> finishedWork </span><span style="color:#6A737D">// The next phase is the layout phase, where we call effects that read</span></span>
<span data-line=""><span style="color:#6A737D">    // the host tree after it&#x27;s been mutated. The idiomatic use case for this is</span></span>
<span data-line=""><span style="color:#6A737D">    // layout, but class component lifecycles also fire here for legacy reasons.</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#24292E">    nextEffect </span><span style="color:#D73A49">=</span><span style="color:#24292E"> firstEffect</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#D73A49">    do</span><span style="color:#24292E"> {</span></span>
<span data-line=""><span style="color:#24292E">      {</span></span>
<span data-line=""><span style="color:#6F42C1">        invokeGuardedCallback</span><span style="color:#24292E">(</span><span style="color:#005CC5">null</span><span style="color:#24292E">, commitLayoutEffects, </span><span style="color:#005CC5">null</span><span style="color:#24292E">, root, lanes)</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#D73A49">        if</span><span style="color:#24292E"> (</span><span style="color:#6F42C1">hasCaughtError</span><span style="color:#24292E">()) {</span></span>
<span data-line=""><span style="color:#D73A49">          if</span><span style="color:#24292E"> (</span><span style="color:#D73A49">!</span><span style="color:#24292E">(nextEffect </span><span style="color:#D73A49">!==</span><span style="color:#005CC5"> null</span><span style="color:#24292E">)) {</span></span>
<span data-line=""><span style="color:#24292E">            {</span></span>
<span data-line=""><span style="color:#D73A49">              throw</span><span style="color:#6F42C1"> Error</span><span style="color:#24292E">(</span><span style="color:#032F62">&#x27;Should be working on an effect.&#x27;</span><span style="color:#24292E">)</span></span>
<span data-line=""><span style="color:#24292E">            }</span></span>
<span data-line=""><span style="color:#24292E">          }</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#D73A49">          var</span><span style="color:#24292E"> _error2 </span><span style="color:#D73A49">=</span><span style="color:#6F42C1"> clearCaughtError</span><span style="color:#24292E">()</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#6F42C1">          captureCommitPhaseError</span><span style="color:#24292E">(nextEffect, _error2)</span></span>
<span data-line=""><span style="color:#24292E">          nextEffect </span><span style="color:#D73A49">=</span><span style="color:#24292E"> nextEffect.nextEffect</span></span>
<span data-line=""><span style="color:#24292E">        }</span></span>
<span data-line=""><span style="color:#24292E">      }</span></span>
<span data-line=""><span style="color:#24292E">    } </span><span style="color:#D73A49">while</span><span style="color:#24292E"> (nextEffect </span><span style="color:#D73A49">!==</span><span style="color:#005CC5"> null</span><span style="color:#24292E">)</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#24292E">    nextEffect </span><span style="color:#D73A49">=</span><span style="color:#005CC5"> null</span><span style="color:#6A737D"> // Tell Scheduler to yield at the end of the frame, so the browser has an</span></span>
<span data-line=""><span style="color:#6A737D">    // opportunity to paint.</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#6F42C1">    requestPaint</span><span style="color:#24292E">()</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#24292E">    {</span></span>
<span data-line=""><span style="color:#6F42C1">      popInteractions</span><span style="color:#24292E">(prevInteractions)</span></span>
<span data-line=""><span style="color:#24292E">    }</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#24292E">    executionContext </span><span style="color:#D73A49">=</span><span style="color:#24292E"> prevExecutionContext</span></span>
<span data-line=""><span style="color:#24292E">  } </span><span style="color:#D73A49">else</span><span style="color:#24292E"> {</span></span>
<span data-line=""><span style="color:#6A737D">    // No effects.</span></span>
<span data-line=""><span style="color:#24292E">    root.current </span><span style="color:#D73A49">=</span><span style="color:#24292E"> finishedWork </span><span style="color:#6A737D">// Measure these anyway so the flamegraph explicitly shows that there were</span></span>
<span data-line=""><span style="color:#6A737D">    // no effects.</span></span>
<span data-line=""><span style="color:#6A737D">    // TODO: Maybe there&#x27;s a better way to report this.</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#24292E">    {</span></span>
<span data-line=""><span style="color:#6F42C1">      recordCommitTime</span><span style="color:#24292E">()</span></span>
<span data-line=""><span style="color:#24292E">    }</span></span>
<span data-line=""><span style="color:#24292E">  }</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#D73A49">  var</span><span style="color:#24292E"> rootDidHavePassiveEffects </span><span style="color:#D73A49">=</span><span style="color:#24292E"> rootDoesHavePassiveEffects</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#D73A49">  if</span><span style="color:#24292E"> (rootDoesHavePassiveEffects) {</span></span>
<span data-line=""><span style="color:#6A737D">    // This commit has passive effects. Stash a reference to them. But don&#x27;t</span></span>
<span data-line=""><span style="color:#6A737D">    // schedule a callback until after flushing layout work.</span></span>
<span data-line=""><span style="color:#24292E">    rootDoesHavePassiveEffects </span><span style="color:#D73A49">=</span><span style="color:#005CC5"> false</span></span>
<span data-line=""><span style="color:#24292E">    rootWithPendingPassiveEffects </span><span style="color:#D73A49">=</span><span style="color:#24292E"> root</span></span>
<span data-line=""><span style="color:#24292E">    pendingPassiveEffectsLanes </span><span style="color:#D73A49">=</span><span style="color:#24292E"> lanes</span></span>
<span data-line=""><span style="color:#24292E">    pendingPassiveEffectsRenderPriority </span><span style="color:#D73A49">=</span><span style="color:#24292E"> renderPriorityLevel</span></span>
<span data-line=""><span style="color:#24292E">  } </span><span style="color:#D73A49">else</span><span style="color:#24292E"> {</span></span>
<span data-line=""><span style="color:#6A737D">    // We are done with the effect chain at this point so let&#x27;s clear the</span></span>
<span data-line=""><span style="color:#6A737D">    // nextEffect pointers to assist with GC. If we have passive effects, we&#x27;ll</span></span>
<span data-line=""><span style="color:#6A737D">    // clear this in flushPassiveEffects.</span></span>
<span data-line=""><span style="color:#24292E">    nextEffect </span><span style="color:#D73A49">=</span><span style="color:#24292E"> firstEffect</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#D73A49">    while</span><span style="color:#24292E"> (nextEffect </span><span style="color:#D73A49">!==</span><span style="color:#005CC5"> null</span><span style="color:#24292E">) {</span></span>
<span data-line=""><span style="color:#D73A49">      var</span><span style="color:#24292E"> nextNextEffect </span><span style="color:#D73A49">=</span><span style="color:#24292E"> nextEffect.nextEffect</span></span>
<span data-line=""><span style="color:#24292E">      nextEffect.nextEffect </span><span style="color:#D73A49">=</span><span style="color:#005CC5"> null</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#D73A49">      if</span><span style="color:#24292E"> (nextEffect.flags </span><span style="color:#D73A49">&amp;</span><span style="color:#24292E"> Deletion) {</span></span>
<span data-line=""><span style="color:#6F42C1">        detachFiberAfterEffects</span><span style="color:#24292E">(nextEffect)</span></span>
<span data-line=""><span style="color:#24292E">      }</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#24292E">      nextEffect </span><span style="color:#D73A49">=</span><span style="color:#24292E"> nextNextEffect</span></span>
<span data-line=""><span style="color:#24292E">    }</span></span>
<span data-line=""><span style="color:#24292E">  } </span><span style="color:#6A737D">// Read this again, since an effect might have updated it</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#24292E">  remainingLanes </span><span style="color:#D73A49">=</span><span style="color:#24292E"> root.pendingLanes </span><span style="color:#6A737D">// Check if there&#x27;s remaining work on this root</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#D73A49">  if</span><span style="color:#24292E"> (remainingLanes </span><span style="color:#D73A49">!==</span><span style="color:#24292E"> NoLanes) {</span></span>
<span data-line=""><span style="color:#24292E">    {</span></span>
<span data-line=""><span style="color:#D73A49">      if</span><span style="color:#24292E"> (spawnedWorkDuringRender </span><span style="color:#D73A49">!==</span><span style="color:#005CC5"> null</span><span style="color:#24292E">) {</span></span>
<span data-line=""><span style="color:#D73A49">        var</span><span style="color:#24292E"> expirationTimes </span><span style="color:#D73A49">=</span><span style="color:#24292E"> spawnedWorkDuringRender</span></span>
<span data-line=""><span style="color:#24292E">        spawnedWorkDuringRender </span><span style="color:#D73A49">=</span><span style="color:#005CC5"> null</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#D73A49">        for</span><span style="color:#24292E"> (</span><span style="color:#D73A49">var</span><span style="color:#24292E"> i </span><span style="color:#D73A49">=</span><span style="color:#005CC5"> 0</span><span style="color:#24292E">; i </span><span style="color:#D73A49">&lt;</span><span style="color:#24292E"> expirationTimes.</span><span style="color:#005CC5">length</span><span style="color:#24292E">; i</span><span style="color:#D73A49">++</span><span style="color:#24292E">) {</span></span>
<span data-line=""><span style="color:#6F42C1">          scheduleInteractions</span><span style="color:#24292E">(</span></span>
<span data-line=""><span style="color:#24292E">            root,</span></span>
<span data-line=""><span style="color:#24292E">            expirationTimes[i],</span></span>
<span data-line=""><span style="color:#24292E">            root.memoizedInteractions,</span></span>
<span data-line=""><span style="color:#24292E">          )</span></span>
<span data-line=""><span style="color:#24292E">        }</span></span>
<span data-line=""><span style="color:#24292E">      }</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#6F42C1">      schedulePendingInteractions</span><span style="color:#24292E">(root, remainingLanes)</span></span>
<span data-line=""><span style="color:#24292E">    }</span></span>
<span data-line=""><span style="color:#24292E">  } </span><span style="color:#D73A49">else</span><span style="color:#24292E"> {</span></span>
<span data-line=""><span style="color:#6A737D">    // If there&#x27;s no remaining work, we can clear the set of already failed</span></span>
<span data-line=""><span style="color:#6A737D">    // error boundaries.</span></span>
<span data-line=""><span style="color:#24292E">    legacyErrorBoundariesThatAlreadyFailed </span><span style="color:#D73A49">=</span><span style="color:#005CC5"> null</span></span>
<span data-line=""><span style="color:#24292E">  }</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#24292E">  {</span></span>
<span data-line=""><span style="color:#D73A49">    if</span><span style="color:#24292E"> (</span><span style="color:#D73A49">!</span><span style="color:#24292E">rootDidHavePassiveEffects) {</span></span>
<span data-line=""><span style="color:#6A737D">      // If there are no passive effects, then we can complete the pending interactions.</span></span>
<span data-line=""><span style="color:#6A737D">      // Otherwise, we&#x27;ll wait until after the passive effects are flushed.</span></span>
<span data-line=""><span style="color:#6A737D">      // Wait to do this until after remaining work has been scheduled,</span></span>
<span data-line=""><span style="color:#6A737D">      // so that we don&#x27;t prematurely signal complete for interactions when there&#x27;s e.g. hidden work.</span></span>
<span data-line=""><span style="color:#6F42C1">      finishPendingInteractions</span><span style="color:#24292E">(root, lanes)</span></span>
<span data-line=""><span style="color:#24292E">    }</span></span>
<span data-line=""><span style="color:#24292E">  }</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#D73A49">  if</span><span style="color:#24292E"> (remainingLanes </span><span style="color:#D73A49">===</span><span style="color:#24292E"> SyncLane) {</span></span>
<span data-line=""><span style="color:#6A737D">    // Count the number of times the root synchronously re-renders without</span></span>
<span data-line=""><span style="color:#6A737D">    // finishing. If there are too many, it indicates an infinite update loop.</span></span>
<span data-line=""><span style="color:#D73A49">    if</span><span style="color:#24292E"> (root </span><span style="color:#D73A49">===</span><span style="color:#24292E"> rootWithNestedUpdates) {</span></span>
<span data-line=""><span style="color:#24292E">      nestedUpdateCount</span><span style="color:#D73A49">++</span></span>
<span data-line=""><span style="color:#24292E">    } </span><span style="color:#D73A49">else</span><span style="color:#24292E"> {</span></span>
<span data-line=""><span style="color:#24292E">      nestedUpdateCount </span><span style="color:#D73A49">=</span><span style="color:#005CC5"> 0</span></span>
<span data-line=""><span style="color:#24292E">      rootWithNestedUpdates </span><span style="color:#D73A49">=</span><span style="color:#24292E"> root</span></span>
<span data-line=""><span style="color:#24292E">    }</span></span>
<span data-line=""><span style="color:#24292E">  } </span><span style="color:#D73A49">else</span><span style="color:#24292E"> {</span></span>
<span data-line=""><span style="color:#24292E">    nestedUpdateCount </span><span style="color:#D73A49">=</span><span style="color:#005CC5"> 0</span></span>
<span data-line=""><span style="color:#24292E">  }</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#6F42C1">  onCommitRoot</span><span style="color:#24292E">(finishedWork.stateNode, renderPriorityLevel)</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#24292E">  {</span></span>
<span data-line=""><span style="color:#6F42C1">    onCommitRoot$1</span><span style="color:#24292E">()</span></span>
<span data-line=""><span style="color:#24292E">  } </span><span style="color:#6A737D">// Always call this before exiting `commitRoot`, to ensure that any</span></span>
<span data-line=""><span style="color:#6A737D">  // additional work on this root is scheduled.</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#6F42C1">  ensureRootIsScheduled</span><span style="color:#24292E">(root, </span><span style="color:#6F42C1">now</span><span style="color:#24292E">())</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#D73A49">  if</span><span style="color:#24292E"> (hasUncaughtError) {</span></span>
<span data-line=""><span style="color:#24292E">    hasUncaughtError </span><span style="color:#D73A49">=</span><span style="color:#005CC5"> false</span></span>
<span data-line=""><span style="color:#D73A49">    var</span><span style="color:#24292E"> _error3 </span><span style="color:#D73A49">=</span><span style="color:#24292E"> firstUncaughtError</span></span>
<span data-line=""><span style="color:#24292E">    firstUncaughtError </span><span style="color:#D73A49">=</span><span style="color:#005CC5"> null</span></span>
<span data-line=""><span style="color:#D73A49">    throw</span><span style="color:#24292E"> _error3</span></span>
<span data-line=""><span style="color:#24292E">  }</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#D73A49">  if</span><span style="color:#24292E"> ((executionContext </span><span style="color:#D73A49">&amp;</span><span style="color:#24292E"> LegacyUnbatchedContext) </span><span style="color:#D73A49">!==</span><span style="color:#24292E"> NoContext) {</span></span>
<span data-line=""><span style="color:#24292E">    {</span></span>
<span data-line=""><span style="color:#6F42C1">      markCommitStopped</span><span style="color:#24292E">()</span></span>
<span data-line=""><span style="color:#24292E">    } </span><span style="color:#6A737D">// This is a legacy edge case. We just committed the initial mount of</span></span>
<span data-line=""><span style="color:#6A737D">    // a ReactDOM.render-ed root inside of batchedUpdates. The commit fired</span></span>
<span data-line=""><span style="color:#6A737D">    // synchronously, but layout updates should be deferred until the end</span></span>
<span data-line=""><span style="color:#6A737D">    // of the batch.</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#D73A49">    return</span><span style="color:#005CC5"> null</span></span>
<span data-line=""><span style="color:#24292E">  } </span><span style="color:#6A737D">// If layout work was scheduled, flush it now.</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#6F42C1">  flushSyncCallbackQueue</span><span style="color:#24292E">()</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#24292E">  {</span></span>
<span data-line=""><span style="color:#6F42C1">    markCommitStopped</span><span style="color:#24292E">()</span></span>
<span data-line=""><span style="color:#24292E">  }</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#D73A49">  return</span><span style="color:#005CC5"> null</span></span>
<span data-line=""><span style="color:#24292E">}</span></span></code></pre></figure>
<h2 id=""></h2>
<figure data-rehype-pretty-code-figure=""><pre style="background-color:#fff;color:#24292e" tabindex="0" data-language="js" data-theme="github-light"><code data-language="js" data-theme="github-light" style="display:grid"><span data-line=""> </span></code></pre></figure></div><footer class="mt-[32px]"><div class="border-divider flex justify-between border-t pt-[24px]"><div class="w-[calc(50%-4px)]"><a class="cursor-pointer border-divider hover:border-brand group block h-full w-full rounded-[8px] border px-[16px] py-[8px] transition-colors duration-300"><div class="text-text-2 text-[12px] font-[500] leading-[20px]">上一页</div><div class=" text-text-2 group-hover:text-brand overflow-hidden text-ellipsis whitespace-nowrap text-[14px] font-[500] leading-[20px] transition-colors duration-300">进入commit()阶段</div></a></div><div class="w-[calc(50%-4px)]"></div></div></footer></div></div><aside class="w-toc full:flex sticky top-[calc(theme(spacing.nav)+48px)] hidden h-full flex-col"><div class="border-divider pc:border-l px-[16px] font-[500]"><div class="pc:block bg-brand absolute left-0 hidden h-[18px] w-px transition-[opacity,top] duration-300" style="top:33px;opacity:0"></div><div class="text-[14px] font-[600] leading-[28px]">本页目录</div><div><div><a href="#" class="text-text-2 text-hover block overflow-hidden text-ellipsis whitespace-nowrap text-[13px] leading-[28px]" style="padding-left:0rem"></a></div></div></div></aside></div></div></div>
  
    <script type="module" src="/client-entry.js"></script>
    </body>
    
</html>
