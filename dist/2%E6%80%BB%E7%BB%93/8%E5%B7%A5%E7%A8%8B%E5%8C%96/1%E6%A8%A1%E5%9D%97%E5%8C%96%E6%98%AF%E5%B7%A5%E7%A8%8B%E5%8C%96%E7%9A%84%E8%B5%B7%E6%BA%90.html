<!doctype html>
<html>
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ZEROPRESS</title>
  <link rel="stylesheet" href="/assets/client-entry-Dj2YQCT4.css">
  <body>
    <div id="root"><header class="pc:fixed absolute left-0 top-0 z-50 w-full"><div class="border-divider bg-bg-default h-nav border-b px-[12px] pt-px transition-colors duration-300"><div class="flex h-full items-center justify-between"><div class="flex h-full justify-start"><div class="h-full"><nav class="mx-[12px] flex h-full items-center"><a class="cursor-pointer"><img src="/logo.jpg" class="h-[24px] w-[24px]"/></a></nav></div></div><div class="flex h-full justify-end"><div class="h-full"><nav class="mx-[12px] h-full justify-end"><a class="cursor-pointer text-text-2 text-hover flex h-full items-center whitespace-nowrap text-[14px] font-[500]">http</a></nav></div><div class="h-full"><nav class="mx-[12px] h-full justify-end"><a class="cursor-pointer text-text-2 text-hover flex h-full items-center whitespace-nowrap text-[14px] font-[500]">react17</a></nav></div><div class="h-full"><nav class="mx-[12px] h-full justify-end"><a class="cursor-pointer text-text-2 text-hover flex h-full items-center whitespace-nowrap text-[14px] font-[500]">数据结构与算法</a></nav></div><div class="h-full"><nav class="mx-[12px] h-full justify-end"><a class="cursor-pointer text-text-2 text-hover flex h-full items-center whitespace-nowrap text-[14px] font-[500]">设计模式</a></nav></div><div class="h-full"><nav class="mx-[12px] h-full justify-end"><a class="cursor-pointer text-text-2 text-hover flex h-full items-center whitespace-nowrap text-[14px] font-[500]">笔记</a></nav></div><div class="h-full"><nav class="mx-[12px] h-full justify-end"><a class="cursor-pointer text-brand text-hover flex h-full items-center whitespace-nowrap text-[14px] font-[500]">总结</a></nav></div><div class="h-full"><nav class="mx-[12px] h-full justify-end"><a class="cursor-pointer text-text-2 text-hover flex h-full items-center whitespace-nowrap text-[14px] font-[500]">收集</a></nav></div><div class="h-full"><nav class="mx-[12px] h-full justify-end"><a class="cursor-pointer text-text-2 text-hover flex h-full items-center whitespace-nowrap text-[14px] font-[500]">业务</a></nav></div><div class="h-full"><nav class="mx-[4px] flex h-full items-center"><button class="bg-bg-switch border-divider hover:border-gray-1 relative h-[22px] w-[40px] rounded-[11px] border transition-colors duration-300"><div class="bg-bg-inverse shadow-1 absolute left-px top-px h-[18px] w-[18px] overflow-hidden rounded-[50%] transition-all duration-300 dark:translate-x-[18px]"><span class="*:text-text-2 *:absolute *:left-[3px] *:top-[3px] *:h-[12px] *:w-[12px] *:transition-opacity *:duration-300"><div class="icon-[carbon--sun] opacity-100 dark:opacity-0"></div><div class="icon-[carbon--moon] opacity-0 dark:opacity-100"></div></span></div></button></nav></div><div class="h-full"><nav class="mx-[12px] h-full"><a href="https://github.com/houhongxu/hhxpress" class="cursor-pointer text-text-2 text-hover flex  h-full items-center"><span class="icon-[carbon--logo-github] h-[24px] w-[24px]"></span></a></nav></div></div></div></div></header><div class="pt-nav"><aside class="mt-nav w-sidebar border-divider bg-bg-sidebar pc:-translate-x-0 fixed inset-y-0 left-0 z-40 -translate-x-full overflow-y-auto border-r px-[28px] py-[16px] transition-transform duration-300"><div class="border-divider mt-[4px] border-t first:mt-0 first:border-t-0"><h2 class="text-text-1 mb-[6px] mt-[12px] flex cursor-pointer items-center justify-between font-[700]"><span>介绍</span><span class="rotate-90 icon-[carbon--chevron-right] transition-transform duration-300"></span></h2><div style="height:27px" class="mb-[12px] flex flex-col overflow-hidden pl-[1rem] transition-[height] duration-300"><a class="cursor-pointer text-text-2 text-hover mb-[2px] overflow-hidden text-ellipsis whitespace-nowrap p-[2px] text-[14px]">intro</a></div></div><div class="border-divider mt-[4px] border-t first:mt-0 first:border-t-0"><h2 class="text-text-1 mb-[6px] mt-[12px] flex cursor-pointer items-center justify-between font-[700]"><span>http</span><span class="rotate-90 icon-[carbon--chevron-right] transition-transform duration-300"></span></h2><div style="height:324px" class="mb-[12px] flex flex-col overflow-hidden pl-[1rem] transition-[height] duration-300"><a class="cursor-pointer text-text-2 text-hover mb-[2px] overflow-hidden text-ellipsis whitespace-nowrap p-[2px] text-[14px]">http1与2与3</a><a class="cursor-pointer text-text-2 text-hover mb-[2px] overflow-hidden text-ellipsis whitespace-nowrap p-[2px] text-[14px]">http与https</a><a class="cursor-pointer text-text-2 text-hover mb-[2px] overflow-hidden text-ellipsis whitespace-nowrap p-[2px] text-[14px]">状态码</a><a class="cursor-pointer text-text-2 text-hover mb-[2px] overflow-hidden text-ellipsis whitespace-nowrap p-[2px] text-[14px]">缓存</a><a class="cursor-pointer text-text-2 text-hover mb-[2px] overflow-hidden text-ellipsis whitespace-nowrap p-[2px] text-[14px]">跨域</a><a class="cursor-pointer text-text-2 text-hover mb-[2px] overflow-hidden text-ellipsis whitespace-nowrap p-[2px] text-[14px]">Cookie</a><a class="cursor-pointer text-text-2 text-hover mb-[2px] overflow-hidden text-ellipsis whitespace-nowrap p-[2px] text-[14px]">安全</a><a class="cursor-pointer text-text-2 text-hover mb-[2px] overflow-hidden text-ellipsis whitespace-nowrap p-[2px] text-[14px]">内容协商</a><a class="cursor-pointer text-text-2 text-hover mb-[2px] overflow-hidden text-ellipsis whitespace-nowrap p-[2px] text-[14px]">CDN</a><a class="cursor-pointer text-text-2 text-hover mb-[2px] overflow-hidden text-ellipsis whitespace-nowrap p-[2px] text-[14px]">文件上传</a><a class="cursor-pointer text-text-2 text-hover mb-[2px] overflow-hidden text-ellipsis whitespace-nowrap p-[2px] text-[14px]">防盗链</a><a class="cursor-pointer text-text-2 text-hover mb-[2px] overflow-hidden text-ellipsis whitespace-nowrap p-[2px] text-[14px]">浏览器构建HTTP请求行时怎么确定HTTP版本的</a></div></div><div class="border-divider mt-[4px] border-t first:mt-0 first:border-t-0"><h2 class="text-text-1 mb-[6px] mt-[12px] flex cursor-pointer items-center justify-between font-[700]"><span>浏览器</span><span class="rotate-90 icon-[carbon--chevron-right] transition-transform duration-300"></span></h2><div style="height:54px" class="mb-[12px] flex flex-col overflow-hidden pl-[1rem] transition-[height] duration-300"><a class="cursor-pointer text-text-2 text-hover mb-[2px] overflow-hidden text-ellipsis whitespace-nowrap p-[2px] text-[14px]">从url开始的长篇大论</a><a class="cursor-pointer text-text-2 text-hover mb-[2px] overflow-hidden text-ellipsis whitespace-nowrap p-[2px] text-[14px]">同站同进程</a></div></div><div class="border-divider mt-[4px] border-t first:mt-0 first:border-t-0"><h2 class="text-text-1 mb-[6px] mt-[12px] flex cursor-pointer items-center justify-between font-[700]"><span>css</span><span class="rotate-90 icon-[carbon--chevron-right] transition-transform duration-300"></span></h2><div style="height:297px" class="mb-[12px] flex flex-col overflow-hidden pl-[1rem] transition-[height] duration-300"><a class="cursor-pointer text-text-2 text-hover mb-[2px] overflow-hidden text-ellipsis whitespace-nowrap p-[2px] text-[14px]">盒模型</a><a class="cursor-pointer text-text-2 text-hover mb-[2px] overflow-hidden text-ellipsis whitespace-nowrap p-[2px] text-[14px]">水平垂直居中</a><a class="cursor-pointer text-text-2 text-hover mb-[2px] overflow-hidden text-ellipsis whitespace-nowrap p-[2px] text-[14px]">左侧固定右侧自适应</a><a class="cursor-pointer text-text-2 text-hover mb-[2px] overflow-hidden text-ellipsis whitespace-nowrap p-[2px] text-[14px]">三列均分布局</a><a class="cursor-pointer text-text-2 text-hover mb-[2px] overflow-hidden text-ellipsis whitespace-nowrap p-[2px] text-[14px]">长宽比固定的元素</a><a class="cursor-pointer text-text-2 text-hover mb-[2px] overflow-hidden text-ellipsis whitespace-nowrap p-[2px] text-[14px]">三角形元素</a><a class="cursor-pointer text-text-2 text-hover mb-[2px] overflow-hidden text-ellipsis whitespace-nowrap p-[2px] text-[14px]">选择器权重</a><a class="cursor-pointer text-text-2 text-hover mb-[2px] overflow-hidden text-ellipsis whitespace-nowrap p-[2px] text-[14px]">层叠上下文</a><a class="cursor-pointer text-text-2 text-hover mb-[2px] overflow-hidden text-ellipsis whitespace-nowrap p-[2px] text-[14px]">格式化上下文</a><a class="cursor-pointer text-text-2 text-hover mb-[2px] overflow-hidden text-ellipsis whitespace-nowrap p-[2px] text-[14px]">文本的样式处理</a><a class="cursor-pointer text-text-2 text-hover mb-[2px] overflow-hidden text-ellipsis whitespace-nowrap p-[2px] text-[14px]">readme</a></div></div><div class="border-divider mt-[4px] border-t first:mt-0 first:border-t-0"><h2 class="text-text-1 mb-[6px] mt-[12px] flex cursor-pointer items-center justify-between font-[700]"><span>javascript</span><span class="rotate-90 icon-[carbon--chevron-right] transition-transform duration-300"></span></h2><div style="height:243px" class="mb-[12px] flex flex-col overflow-hidden pl-[1rem] transition-[height] duration-300"><a class="cursor-pointer text-text-2 text-hover mb-[2px] overflow-hidden text-ellipsis whitespace-nowrap p-[2px] text-[14px]">变量提升 与 闭包 与 this 与 new 那得从 V8 执行上下文 说起</a><a class="cursor-pointer text-text-2 text-hover mb-[2px] overflow-hidden text-ellipsis whitespace-nowrap p-[2px] text-[14px]">看得见的原型链</a><a class="cursor-pointer text-text-2 text-hover mb-[2px] overflow-hidden text-ellipsis whitespace-nowrap p-[2px] text-[14px]">还在手写promise呢</a><a class="cursor-pointer text-text-2 text-hover mb-[2px] overflow-hidden text-ellipsis whitespace-nowrap p-[2px] text-[14px]">防抖与节流</a><a class="cursor-pointer text-text-2 text-hover mb-[2px] overflow-hidden text-ellipsis whitespace-nowrap p-[2px] text-[14px]">apply与call与bind</a><a class="cursor-pointer text-text-2 text-hover mb-[2px] overflow-hidden text-ellipsis whitespace-nowrap p-[2px] text-[14px]">深拷贝</a><a class="cursor-pointer text-text-2 text-hover mb-[2px] overflow-hidden text-ellipsis whitespace-nowrap p-[2px] text-[14px]">promiseMap</a><a class="cursor-pointer text-text-2 text-hover mb-[2px] overflow-hidden text-ellipsis whitespace-nowrap p-[2px] text-[14px]">事件委托</a><a class="cursor-pointer text-text-2 text-hover mb-[2px] overflow-hidden text-ellipsis whitespace-nowrap p-[2px] text-[14px]">readme</a></div></div><div class="border-divider mt-[4px] border-t first:mt-0 first:border-t-0"><h2 class="text-text-1 mb-[6px] mt-[12px] flex cursor-pointer items-center justify-between font-[700]"><span>react</span><span class="rotate-90 icon-[carbon--chevron-right] transition-transform duration-300"></span></h2><div style="height:378px" class="mb-[12px] flex flex-col overflow-hidden pl-[1rem] transition-[height] duration-300"><a class="cursor-pointer text-text-2 text-hover mb-[2px] overflow-hidden text-ellipsis whitespace-nowrap p-[2px] text-[14px]">react原理</a><a class="cursor-pointer text-text-2 text-hover mb-[2px] overflow-hidden text-ellipsis whitespace-nowrap p-[2px] text-[14px]">不应该有闭包陷阱这个问题</a><a class="cursor-pointer text-text-2 text-hover mb-[2px] overflow-hidden text-ellipsis whitespace-nowrap p-[2px] text-[14px]">理论上useCallback可以被完全替换</a><a class="cursor-pointer text-text-2 text-hover mb-[2px] overflow-hidden text-ellipsis whitespace-nowrap p-[2px] text-[14px]">memo 为什么需要和 useCallback或useMemo 搭配</a><a class="cursor-pointer text-text-2 text-hover mb-[2px] overflow-hidden text-ellipsis whitespace-nowrap p-[2px] text-[14px]">hook 作弊器 useReducer</a><a class="cursor-pointer text-text-2 text-hover mb-[2px] overflow-hidden text-ellipsis whitespace-nowrap p-[2px] text-[14px]">diff算法</a><a class="cursor-pointer text-text-2 text-hover mb-[2px] overflow-hidden text-ellipsis whitespace-nowrap p-[2px] text-[14px]">react hooks并不依赖fiber</a><a class="cursor-pointer text-text-2 text-hover mb-[2px] overflow-hidden text-ellipsis whitespace-nowrap p-[2px] text-[14px]">context你怎么回事</a><a class="cursor-pointer text-text-2 text-hover mb-[2px] overflow-hidden text-ellipsis whitespace-nowrap p-[2px] text-[14px]">state的同步异步</a><a class="cursor-pointer text-text-2 text-hover mb-[2px] overflow-hidden text-ellipsis whitespace-nowrap p-[2px] text-[14px]">函数组件没有ErrorBoundary怎么办</a><a class="cursor-pointer text-text-2 text-hover mb-[2px] overflow-hidden text-ellipsis whitespace-nowrap p-[2px] text-[14px]">调度lane</a><a class="cursor-pointer text-text-2 text-hover mb-[2px] overflow-hidden text-ellipsis whitespace-nowrap p-[2px] text-[14px]">并发？批处理？</a><a class="cursor-pointer text-text-2 text-hover mb-[2px] overflow-hidden text-ellipsis whitespace-nowrap p-[2px] text-[14px]">vdom提高性能？</a><a class="cursor-pointer text-text-2 text-hover mb-[2px] overflow-hidden text-ellipsis whitespace-nowrap p-[2px] text-[14px]">todo</a></div></div><div class="border-divider mt-[4px] border-t first:mt-0 first:border-t-0"><h2 class="text-text-1 mb-[6px] mt-[12px] flex cursor-pointer items-center justify-between font-[700]"><span>webpack</span><span class="rotate-90 icon-[carbon--chevron-right] transition-transform duration-300"></span></h2><div style="height:54px" class="mb-[12px] flex flex-col overflow-hidden pl-[1rem] transition-[height] duration-300"><a class="cursor-pointer text-text-2 text-hover mb-[2px] overflow-hidden text-ellipsis whitespace-nowrap p-[2px] text-[14px]">为什么 webpack 仍然必要</a><a class="cursor-pointer text-text-2 text-hover mb-[2px] overflow-hidden text-ellipsis whitespace-nowrap p-[2px] text-[14px]">分包</a></div></div><div class="border-divider mt-[4px] border-t first:mt-0 first:border-t-0"><h2 class="text-text-1 mb-[6px] mt-[12px] flex cursor-pointer items-center justify-between font-[700]"><span>vite</span><span class="rotate-90 icon-[carbon--chevron-right] transition-transform duration-300"></span></h2><div style="height:54px" class="mb-[12px] flex flex-col overflow-hidden pl-[1rem] transition-[height] duration-300"><a class="cursor-pointer text-text-2 text-hover mb-[2px] overflow-hidden text-ellipsis whitespace-nowrap p-[2px] text-[14px]">为什么vite比webpack快</a><a class="cursor-pointer text-text-2 text-hover mb-[2px] overflow-hidden text-ellipsis whitespace-nowrap p-[2px] text-[14px]">vite和webpack HMR</a></div></div><div class="border-divider mt-[4px] border-t first:mt-0 first:border-t-0"><h2 class="text-text-1 mb-[6px] mt-[12px] flex cursor-pointer items-center justify-between font-[700]"><span>工程化</span><span class="rotate-90 icon-[carbon--chevron-right] transition-transform duration-300"></span></h2><div style="height:108px" class="mb-[12px] flex flex-col overflow-hidden pl-[1rem] transition-[height] duration-300"><a class="cursor-pointer text-brand text-hover mb-[2px] overflow-hidden text-ellipsis whitespace-nowrap p-[2px] text-[14px]">模块化是工程化的起源</a><a class="cursor-pointer text-text-2 text-hover mb-[2px] overflow-hidden text-ellipsis whitespace-nowrap p-[2px] text-[14px]">npm包</a><a class="cursor-pointer text-text-2 text-hover mb-[2px] overflow-hidden text-ellipsis whitespace-nowrap p-[2px] text-[14px]">构建工具分类</a><a class="cursor-pointer text-text-2 text-hover mb-[2px] overflow-hidden text-ellipsis whitespace-nowrap p-[2px] text-[14px]">todo</a></div></div><div class="border-divider mt-[4px] border-t first:mt-0 first:border-t-0"><h2 class="text-text-1 mb-[6px] mt-[12px] flex cursor-pointer items-center justify-between font-[700]"><span>业务</span><span class="rotate-90 icon-[carbon--chevron-right] transition-transform duration-300"></span></h2><div style="height:243px" class="mb-[12px] flex flex-col overflow-hidden pl-[1rem] transition-[height] duration-300"><a class="cursor-pointer text-text-2 text-hover mb-[2px] overflow-hidden text-ellipsis whitespace-nowrap p-[2px] text-[14px]">移动端为主的宽度响应设计</a><a class="cursor-pointer text-text-2 text-hover mb-[2px] overflow-hidden text-ellipsis whitespace-nowrap p-[2px] text-[14px]">首屏优化可以放5s广告吗</a><a class="cursor-pointer text-text-2 text-hover mb-[2px] overflow-hidden text-ellipsis whitespace-nowrap p-[2px] text-[14px]">详情页优化</a><a class="cursor-pointer text-text-2 text-hover mb-[2px] overflow-hidden text-ellipsis whitespace-nowrap p-[2px] text-[14px]">图片展示</a><a class="cursor-pointer text-text-2 text-hover mb-[2px] overflow-hidden text-ellipsis whitespace-nowrap p-[2px] text-[14px]">文件上传</a><a class="cursor-pointer text-text-2 text-hover mb-[2px] overflow-hidden text-ellipsis whitespace-nowrap p-[2px] text-[14px]">登录鉴权</a><a class="cursor-pointer text-text-2 text-hover mb-[2px] overflow-hidden text-ellipsis whitespace-nowrap p-[2px] text-[14px]">深色模式</a><a class="cursor-pointer text-text-2 text-hover mb-[2px] overflow-hidden text-ellipsis whitespace-nowrap p-[2px] text-[14px]">埋点问题</a><a class="cursor-pointer text-text-2 text-hover mb-[2px] overflow-hidden text-ellipsis whitespace-nowrap p-[2px] text-[14px]">如何实现加载进度条</a></div></div></aside><div class="pc:ml-sidebar ml-0 flex justify-between"><div class="mx-auto w-full max-w-[768px] transition-[margin] duration-300"><div class="h-nav pc:hidden bg-bg-default sticky top-0 z-50 w-full border-b"><div class="flex h-full items-center justify-between px-[24px]"><a class="icon-[carbon--list] h-[24px] w-[24px] cursor-pointer"></a><a class="icon-[carbon--border-top] h-[24px] w-[24px] cursor-pointer"></a></div><div class="fixed inset-0 bg-[#00000060] transition-all duration-300 opacity-0 invisible"></div><aside class="w-sidebar border-divider bg-bg-sidebar fixed inset-y-0 left-0 z-40 overflow-y-auto border-r px-[28px] py-[16px] transition-transform duration-300 -translate-x-full"><div class="border-divider mt-[4px] border-t first:mt-0 first:border-t-0"><h2 class="text-text-1 mb-[6px] mt-[12px] flex cursor-pointer items-center justify-between font-[700]"><span>介绍</span><span class="rotate-90 icon-[carbon--chevron-right] transition-transform duration-300"></span></h2><div style="height:27px" class="mb-[12px] flex flex-col overflow-hidden pl-[1rem] transition-[height] duration-300"><a class="cursor-pointer text-text-2 text-hover mb-[2px] overflow-hidden text-ellipsis whitespace-nowrap p-[2px] text-[14px]">intro</a></div></div><div class="border-divider mt-[4px] border-t first:mt-0 first:border-t-0"><h2 class="text-text-1 mb-[6px] mt-[12px] flex cursor-pointer items-center justify-between font-[700]"><span>http</span><span class="rotate-90 icon-[carbon--chevron-right] transition-transform duration-300"></span></h2><div style="height:324px" class="mb-[12px] flex flex-col overflow-hidden pl-[1rem] transition-[height] duration-300"><a class="cursor-pointer text-text-2 text-hover mb-[2px] overflow-hidden text-ellipsis whitespace-nowrap p-[2px] text-[14px]">http1与2与3</a><a class="cursor-pointer text-text-2 text-hover mb-[2px] overflow-hidden text-ellipsis whitespace-nowrap p-[2px] text-[14px]">http与https</a><a class="cursor-pointer text-text-2 text-hover mb-[2px] overflow-hidden text-ellipsis whitespace-nowrap p-[2px] text-[14px]">状态码</a><a class="cursor-pointer text-text-2 text-hover mb-[2px] overflow-hidden text-ellipsis whitespace-nowrap p-[2px] text-[14px]">缓存</a><a class="cursor-pointer text-text-2 text-hover mb-[2px] overflow-hidden text-ellipsis whitespace-nowrap p-[2px] text-[14px]">跨域</a><a class="cursor-pointer text-text-2 text-hover mb-[2px] overflow-hidden text-ellipsis whitespace-nowrap p-[2px] text-[14px]">Cookie</a><a class="cursor-pointer text-text-2 text-hover mb-[2px] overflow-hidden text-ellipsis whitespace-nowrap p-[2px] text-[14px]">安全</a><a class="cursor-pointer text-text-2 text-hover mb-[2px] overflow-hidden text-ellipsis whitespace-nowrap p-[2px] text-[14px]">内容协商</a><a class="cursor-pointer text-text-2 text-hover mb-[2px] overflow-hidden text-ellipsis whitespace-nowrap p-[2px] text-[14px]">CDN</a><a class="cursor-pointer text-text-2 text-hover mb-[2px] overflow-hidden text-ellipsis whitespace-nowrap p-[2px] text-[14px]">文件上传</a><a class="cursor-pointer text-text-2 text-hover mb-[2px] overflow-hidden text-ellipsis whitespace-nowrap p-[2px] text-[14px]">防盗链</a><a class="cursor-pointer text-text-2 text-hover mb-[2px] overflow-hidden text-ellipsis whitespace-nowrap p-[2px] text-[14px]">浏览器构建HTTP请求行时怎么确定HTTP版本的</a></div></div><div class="border-divider mt-[4px] border-t first:mt-0 first:border-t-0"><h2 class="text-text-1 mb-[6px] mt-[12px] flex cursor-pointer items-center justify-between font-[700]"><span>浏览器</span><span class="rotate-90 icon-[carbon--chevron-right] transition-transform duration-300"></span></h2><div style="height:54px" class="mb-[12px] flex flex-col overflow-hidden pl-[1rem] transition-[height] duration-300"><a class="cursor-pointer text-text-2 text-hover mb-[2px] overflow-hidden text-ellipsis whitespace-nowrap p-[2px] text-[14px]">从url开始的长篇大论</a><a class="cursor-pointer text-text-2 text-hover mb-[2px] overflow-hidden text-ellipsis whitespace-nowrap p-[2px] text-[14px]">同站同进程</a></div></div><div class="border-divider mt-[4px] border-t first:mt-0 first:border-t-0"><h2 class="text-text-1 mb-[6px] mt-[12px] flex cursor-pointer items-center justify-between font-[700]"><span>css</span><span class="rotate-90 icon-[carbon--chevron-right] transition-transform duration-300"></span></h2><div style="height:297px" class="mb-[12px] flex flex-col overflow-hidden pl-[1rem] transition-[height] duration-300"><a class="cursor-pointer text-text-2 text-hover mb-[2px] overflow-hidden text-ellipsis whitespace-nowrap p-[2px] text-[14px]">盒模型</a><a class="cursor-pointer text-text-2 text-hover mb-[2px] overflow-hidden text-ellipsis whitespace-nowrap p-[2px] text-[14px]">水平垂直居中</a><a class="cursor-pointer text-text-2 text-hover mb-[2px] overflow-hidden text-ellipsis whitespace-nowrap p-[2px] text-[14px]">左侧固定右侧自适应</a><a class="cursor-pointer text-text-2 text-hover mb-[2px] overflow-hidden text-ellipsis whitespace-nowrap p-[2px] text-[14px]">三列均分布局</a><a class="cursor-pointer text-text-2 text-hover mb-[2px] overflow-hidden text-ellipsis whitespace-nowrap p-[2px] text-[14px]">长宽比固定的元素</a><a class="cursor-pointer text-text-2 text-hover mb-[2px] overflow-hidden text-ellipsis whitespace-nowrap p-[2px] text-[14px]">三角形元素</a><a class="cursor-pointer text-text-2 text-hover mb-[2px] overflow-hidden text-ellipsis whitespace-nowrap p-[2px] text-[14px]">选择器权重</a><a class="cursor-pointer text-text-2 text-hover mb-[2px] overflow-hidden text-ellipsis whitespace-nowrap p-[2px] text-[14px]">层叠上下文</a><a class="cursor-pointer text-text-2 text-hover mb-[2px] overflow-hidden text-ellipsis whitespace-nowrap p-[2px] text-[14px]">格式化上下文</a><a class="cursor-pointer text-text-2 text-hover mb-[2px] overflow-hidden text-ellipsis whitespace-nowrap p-[2px] text-[14px]">文本的样式处理</a><a class="cursor-pointer text-text-2 text-hover mb-[2px] overflow-hidden text-ellipsis whitespace-nowrap p-[2px] text-[14px]">readme</a></div></div><div class="border-divider mt-[4px] border-t first:mt-0 first:border-t-0"><h2 class="text-text-1 mb-[6px] mt-[12px] flex cursor-pointer items-center justify-between font-[700]"><span>javascript</span><span class="rotate-90 icon-[carbon--chevron-right] transition-transform duration-300"></span></h2><div style="height:243px" class="mb-[12px] flex flex-col overflow-hidden pl-[1rem] transition-[height] duration-300"><a class="cursor-pointer text-text-2 text-hover mb-[2px] overflow-hidden text-ellipsis whitespace-nowrap p-[2px] text-[14px]">变量提升 与 闭包 与 this 与 new 那得从 V8 执行上下文 说起</a><a class="cursor-pointer text-text-2 text-hover mb-[2px] overflow-hidden text-ellipsis whitespace-nowrap p-[2px] text-[14px]">看得见的原型链</a><a class="cursor-pointer text-text-2 text-hover mb-[2px] overflow-hidden text-ellipsis whitespace-nowrap p-[2px] text-[14px]">还在手写promise呢</a><a class="cursor-pointer text-text-2 text-hover mb-[2px] overflow-hidden text-ellipsis whitespace-nowrap p-[2px] text-[14px]">防抖与节流</a><a class="cursor-pointer text-text-2 text-hover mb-[2px] overflow-hidden text-ellipsis whitespace-nowrap p-[2px] text-[14px]">apply与call与bind</a><a class="cursor-pointer text-text-2 text-hover mb-[2px] overflow-hidden text-ellipsis whitespace-nowrap p-[2px] text-[14px]">深拷贝</a><a class="cursor-pointer text-text-2 text-hover mb-[2px] overflow-hidden text-ellipsis whitespace-nowrap p-[2px] text-[14px]">promiseMap</a><a class="cursor-pointer text-text-2 text-hover mb-[2px] overflow-hidden text-ellipsis whitespace-nowrap p-[2px] text-[14px]">事件委托</a><a class="cursor-pointer text-text-2 text-hover mb-[2px] overflow-hidden text-ellipsis whitespace-nowrap p-[2px] text-[14px]">readme</a></div></div><div class="border-divider mt-[4px] border-t first:mt-0 first:border-t-0"><h2 class="text-text-1 mb-[6px] mt-[12px] flex cursor-pointer items-center justify-between font-[700]"><span>react</span><span class="rotate-90 icon-[carbon--chevron-right] transition-transform duration-300"></span></h2><div style="height:378px" class="mb-[12px] flex flex-col overflow-hidden pl-[1rem] transition-[height] duration-300"><a class="cursor-pointer text-text-2 text-hover mb-[2px] overflow-hidden text-ellipsis whitespace-nowrap p-[2px] text-[14px]">react原理</a><a class="cursor-pointer text-text-2 text-hover mb-[2px] overflow-hidden text-ellipsis whitespace-nowrap p-[2px] text-[14px]">不应该有闭包陷阱这个问题</a><a class="cursor-pointer text-text-2 text-hover mb-[2px] overflow-hidden text-ellipsis whitespace-nowrap p-[2px] text-[14px]">理论上useCallback可以被完全替换</a><a class="cursor-pointer text-text-2 text-hover mb-[2px] overflow-hidden text-ellipsis whitespace-nowrap p-[2px] text-[14px]">memo 为什么需要和 useCallback或useMemo 搭配</a><a class="cursor-pointer text-text-2 text-hover mb-[2px] overflow-hidden text-ellipsis whitespace-nowrap p-[2px] text-[14px]">hook 作弊器 useReducer</a><a class="cursor-pointer text-text-2 text-hover mb-[2px] overflow-hidden text-ellipsis whitespace-nowrap p-[2px] text-[14px]">diff算法</a><a class="cursor-pointer text-text-2 text-hover mb-[2px] overflow-hidden text-ellipsis whitespace-nowrap p-[2px] text-[14px]">react hooks并不依赖fiber</a><a class="cursor-pointer text-text-2 text-hover mb-[2px] overflow-hidden text-ellipsis whitespace-nowrap p-[2px] text-[14px]">context你怎么回事</a><a class="cursor-pointer text-text-2 text-hover mb-[2px] overflow-hidden text-ellipsis whitespace-nowrap p-[2px] text-[14px]">state的同步异步</a><a class="cursor-pointer text-text-2 text-hover mb-[2px] overflow-hidden text-ellipsis whitespace-nowrap p-[2px] text-[14px]">函数组件没有ErrorBoundary怎么办</a><a class="cursor-pointer text-text-2 text-hover mb-[2px] overflow-hidden text-ellipsis whitespace-nowrap p-[2px] text-[14px]">调度lane</a><a class="cursor-pointer text-text-2 text-hover mb-[2px] overflow-hidden text-ellipsis whitespace-nowrap p-[2px] text-[14px]">并发？批处理？</a><a class="cursor-pointer text-text-2 text-hover mb-[2px] overflow-hidden text-ellipsis whitespace-nowrap p-[2px] text-[14px]">vdom提高性能？</a><a class="cursor-pointer text-text-2 text-hover mb-[2px] overflow-hidden text-ellipsis whitespace-nowrap p-[2px] text-[14px]">todo</a></div></div><div class="border-divider mt-[4px] border-t first:mt-0 first:border-t-0"><h2 class="text-text-1 mb-[6px] mt-[12px] flex cursor-pointer items-center justify-between font-[700]"><span>webpack</span><span class="rotate-90 icon-[carbon--chevron-right] transition-transform duration-300"></span></h2><div style="height:54px" class="mb-[12px] flex flex-col overflow-hidden pl-[1rem] transition-[height] duration-300"><a class="cursor-pointer text-text-2 text-hover mb-[2px] overflow-hidden text-ellipsis whitespace-nowrap p-[2px] text-[14px]">为什么 webpack 仍然必要</a><a class="cursor-pointer text-text-2 text-hover mb-[2px] overflow-hidden text-ellipsis whitespace-nowrap p-[2px] text-[14px]">分包</a></div></div><div class="border-divider mt-[4px] border-t first:mt-0 first:border-t-0"><h2 class="text-text-1 mb-[6px] mt-[12px] flex cursor-pointer items-center justify-between font-[700]"><span>vite</span><span class="rotate-90 icon-[carbon--chevron-right] transition-transform duration-300"></span></h2><div style="height:54px" class="mb-[12px] flex flex-col overflow-hidden pl-[1rem] transition-[height] duration-300"><a class="cursor-pointer text-text-2 text-hover mb-[2px] overflow-hidden text-ellipsis whitespace-nowrap p-[2px] text-[14px]">为什么vite比webpack快</a><a class="cursor-pointer text-text-2 text-hover mb-[2px] overflow-hidden text-ellipsis whitespace-nowrap p-[2px] text-[14px]">vite和webpack HMR</a></div></div><div class="border-divider mt-[4px] border-t first:mt-0 first:border-t-0"><h2 class="text-text-1 mb-[6px] mt-[12px] flex cursor-pointer items-center justify-between font-[700]"><span>工程化</span><span class="rotate-90 icon-[carbon--chevron-right] transition-transform duration-300"></span></h2><div style="height:108px" class="mb-[12px] flex flex-col overflow-hidden pl-[1rem] transition-[height] duration-300"><a class="cursor-pointer text-brand text-hover mb-[2px] overflow-hidden text-ellipsis whitespace-nowrap p-[2px] text-[14px]">模块化是工程化的起源</a><a class="cursor-pointer text-text-2 text-hover mb-[2px] overflow-hidden text-ellipsis whitespace-nowrap p-[2px] text-[14px]">npm包</a><a class="cursor-pointer text-text-2 text-hover mb-[2px] overflow-hidden text-ellipsis whitespace-nowrap p-[2px] text-[14px]">构建工具分类</a><a class="cursor-pointer text-text-2 text-hover mb-[2px] overflow-hidden text-ellipsis whitespace-nowrap p-[2px] text-[14px]">todo</a></div></div><div class="border-divider mt-[4px] border-t first:mt-0 first:border-t-0"><h2 class="text-text-1 mb-[6px] mt-[12px] flex cursor-pointer items-center justify-between font-[700]"><span>业务</span><span class="rotate-90 icon-[carbon--chevron-right] transition-transform duration-300"></span></h2><div style="height:243px" class="mb-[12px] flex flex-col overflow-hidden pl-[1rem] transition-[height] duration-300"><a class="cursor-pointer text-text-2 text-hover mb-[2px] overflow-hidden text-ellipsis whitespace-nowrap p-[2px] text-[14px]">移动端为主的宽度响应设计</a><a class="cursor-pointer text-text-2 text-hover mb-[2px] overflow-hidden text-ellipsis whitespace-nowrap p-[2px] text-[14px]">首屏优化可以放5s广告吗</a><a class="cursor-pointer text-text-2 text-hover mb-[2px] overflow-hidden text-ellipsis whitespace-nowrap p-[2px] text-[14px]">详情页优化</a><a class="cursor-pointer text-text-2 text-hover mb-[2px] overflow-hidden text-ellipsis whitespace-nowrap p-[2px] text-[14px]">图片展示</a><a class="cursor-pointer text-text-2 text-hover mb-[2px] overflow-hidden text-ellipsis whitespace-nowrap p-[2px] text-[14px]">文件上传</a><a class="cursor-pointer text-text-2 text-hover mb-[2px] overflow-hidden text-ellipsis whitespace-nowrap p-[2px] text-[14px]">登录鉴权</a><a class="cursor-pointer text-text-2 text-hover mb-[2px] overflow-hidden text-ellipsis whitespace-nowrap p-[2px] text-[14px]">深色模式</a><a class="cursor-pointer text-text-2 text-hover mb-[2px] overflow-hidden text-ellipsis whitespace-nowrap p-[2px] text-[14px]">埋点问题</a><a class="cursor-pointer text-text-2 text-hover mb-[2px] overflow-hidden text-ellipsis whitespace-nowrap p-[2px] text-[14px]">如何实现加载进度条</a></div></div></aside><div class="fixed inset-0  bg-[#00000060] transition-all duration-300 opacity-0 invisible"></div><aside class="w-toc border-divider bg-bg-sidebar fixed inset-y-0 right-0 z-40  h-full border-l px-[28px] py-[16px] transition-transform duration-300 translate-x-full"><div class="border-divider pc:border-l px-[16px] font-[500]"><div class="pc:block bg-brand absolute left-0 hidden h-[18px] w-px transition-[opacity,top] duration-300" style="top:33px;opacity:0"></div><div class="text-[14px] font-[600] leading-[28px]">本页目录</div><div><div><a href="#原始的模块化" class="text-text-2 text-hover block overflow-hidden text-ellipsis whitespace-nowrap text-[13px] leading-[28px]" style="padding-left:0rem">原始的模块化</a></div><div><a href="#文件划分" class="text-text-2 text-hover block overflow-hidden text-ellipsis whitespace-nowrap text-[13px] leading-[28px]" style="padding-left:1rem">文件划分</a></div><div><a href="#命名空间" class="text-text-2 text-hover block overflow-hidden text-ellipsis whitespace-nowrap text-[13px] leading-[28px]" style="padding-left:1rem">命名空间</a></div><div><a href="#iife" class="text-text-2 text-hover block overflow-hidden text-ellipsis whitespace-nowrap text-[13px] leading-[28px]" style="padding-left:1rem">IIFE</a></div><div><a href="#cjs-amdcmd-esm-模块规范与-umd" class="text-text-2 text-hover block overflow-hidden text-ellipsis whitespace-nowrap text-[13px] leading-[28px]" style="padding-left:0rem">cjs-amd/cmd-esm 模块规范与 umd</a></div><div><a href="#commonjs" class="text-text-2 text-hover block overflow-hidden text-ellipsis whitespace-nowrap text-[13px] leading-[28px]" style="padding-left:1rem">commonJS</a></div><div><a href="#amdcmd" class="text-text-2 text-hover block overflow-hidden text-ellipsis whitespace-nowrap text-[13px] leading-[28px]" style="padding-left:1rem">amd/cmd</a></div><div><a href="#umd" class="text-text-2 text-hover block overflow-hidden text-ellipsis whitespace-nowrap text-[13px] leading-[28px]" style="padding-left:1rem">umd</a></div><div><a href="#esm" class="text-text-2 text-hover block overflow-hidden text-ellipsis whitespace-nowrap text-[13px] leading-[28px]" style="padding-left:1rem">esm</a></div><div><a href="#esm-统一大业" class="text-text-2 text-hover block overflow-hidden text-ellipsis whitespace-nowrap text-[13px] leading-[28px]" style="padding-left:2rem">esm 统一大业</a></div><div><a href="#esm-与-cjs-的兼容" class="text-text-2 text-hover block overflow-hidden text-ellipsis whitespace-nowrap text-[13px] leading-[28px]" style="padding-left:0rem">esm 与 cjs 的兼容</a></div><div><a href="#导入包的时候是怎么区分-cjs-与-esm-文件的" class="text-text-2 text-hover block overflow-hidden text-ellipsis whitespace-nowrap text-[13px] leading-[28px]" style="padding-left:1rem">导入包的时候是怎么区分 cjs 与 esm 文件的</a></div><div><a href="#参考资料" class="text-text-2 text-hover block overflow-hidden text-ellipsis whitespace-nowrap text-[13px] leading-[28px]" style="padding-left:0rem">参考资料</a></div></div></div></aside></div><div class="p-[48px]"><div class="doc"><h1 id="模块化是工程化的起源"><a class="autolink-headings" href="#模块化是工程化的起源"><span style="margin-right:4px">#</span></a>模块化是工程化的起源</h1>
<p>每天浏览文章或多或少都能看到工程化的字样，前端工程化是高阶前端必不可少的能力，也是前端岗位分离出来的原因之一</p>
<p>根据各个教程学习的时候，往往我第一个遇到的问题就是区分 cjs,esm,umd 等模块规范</p>
<p>无论是 npm 等包管理，还是 webpack 等打包器，归根到底都是对包的处理，而包的产生，就是起步于模块化</p>
<h2 id="原始的模块化"><a class="autolink-headings" href="#原始的模块化"><span style="margin-right:4px">#</span></a>原始的模块化</h2>
<h3 id="文件划分"><a class="autolink-headings" href="#文件划分"><span style="margin-right:4px">#</span></a>文件划分</h3>
<p>别人的包内的变量名就会与自己代码内的冲突</p>
<figure data-rehype-pretty-code-figure=""><pre style="background-color:#fff;color:#24292e" tabindex="0" data-language="ts" data-theme="github-light"><code data-language="ts" data-theme="github-light" style="display:grid"><span data-line=""><span style="color:#D73A49">var</span><span style="color:#24292E"> data </span><span style="color:#D73A49">=</span><span style="color:#005CC5"> 1</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#D73A49">function</span><span style="color:#6F42C1"> log</span><span style="color:#24292E">() {</span></span>
<span data-line=""><span style="color:#24292E">  console.</span><span style="color:#6F42C1">log</span><span style="color:#24292E">(data)</span></span>
<span data-line=""><span style="color:#24292E">}</span></span></code></pre></figure>
<h3 id="命名空间"><a class="autolink-headings" href="#命名空间"><span style="margin-right:4px">#</span></a>命名空间</h3>
<p>包内的变量容易被修改</p>
<figure data-rehype-pretty-code-figure=""><pre style="background-color:#fff;color:#24292e" tabindex="0" data-language="ts" data-theme="github-light"><code data-language="ts" data-theme="github-light" style="display:grid"><span data-line=""><span style="color:#24292E">window.moduleA </span><span style="color:#D73A49">=</span><span style="color:#24292E"> {</span></span>
<span data-line=""><span style="color:#24292E">  data: </span><span style="color:#005CC5">1</span><span style="color:#24292E">,</span></span>
<span data-line=""><span style="color:#6F42C1">  log</span><span style="color:#24292E">: </span><span style="color:#D73A49">function</span><span style="color:#24292E"> () {</span></span>
<span data-line=""><span style="color:#24292E">    console.</span><span style="color:#6F42C1">log</span><span style="color:#24292E">(data)</span></span>
<span data-line=""><span style="color:#24292E">  },</span></span>
<span data-line=""><span style="color:#24292E">}</span></span></code></pre></figure>
<h3 id="iife"><a class="autolink-headings" href="#iife"><span style="margin-right:4px">#</span></a>IIFE</h3>
<p>模块无法管理包互相依赖，无法保证 script 引入的执行顺序</p>
<figure data-rehype-pretty-code-figure=""><pre style="background-color:#fff;color:#24292e" tabindex="0" data-language="ts" data-theme="github-light"><code data-language="ts" data-theme="github-light" style="display:grid"><span data-line=""><span style="color:#24292E">;(</span><span style="color:#D73A49">function</span><span style="color:#24292E"> () {</span></span>
<span data-line=""><span style="color:#D73A49">  var</span><span style="color:#24292E"> data </span><span style="color:#D73A49">=</span><span style="color:#005CC5"> 1</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#D73A49">  function</span><span style="color:#6F42C1"> log</span><span style="color:#24292E">() {</span></span>
<span data-line=""><span style="color:#24292E">    console.</span><span style="color:#6F42C1">log</span><span style="color:#24292E">(data)</span></span>
<span data-line=""><span style="color:#24292E">  }</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#24292E">  window.moduleA </span><span style="color:#D73A49">=</span><span style="color:#24292E"> {</span></span>
<span data-line=""><span style="color:#24292E">    log,</span></span>
<span data-line=""><span style="color:#24292E">  }</span></span>
<span data-line=""><span style="color:#24292E">})()</span></span></code></pre></figure>
<h2 id="cjs-amdcmd-esm-模块规范与-umd"><a class="autolink-headings" href="#cjs-amdcmd-esm-模块规范与-umd"><span style="margin-right:4px">#</span></a>cjs-amd/cmd-esm 模块规范与 umd</h2>
<h3 id="commonjs"><a class="autolink-headings" href="#commonjs"><span style="margin-right:4px">#</span></a>commonJS</h3>
<ul>
<li>
<p>cjs 是 node 原生支持的规范，由 node 实现 loader，无法直接用于浏览器</p>
</li>
<li>
<p>cjs 同步加载不适用于浏览器，会阻塞页面渲染</p>
</li>
<li>
<p>cjs 导入时，会导入对象的副本</p>
</li>
<li>
<p>cjs 是动态的，函数内可以导入，所以不支持<code>Tree Shaking</code>，只能全量打包</p>
</li>
<li>
<p>cjs 模块在第一次被加载后会被缓存在<code>require.cache</code>中，可以通过<code>require.resolve</code>获取包路径 key</p>
</li>
<li>
<p>cjs 模块代码包装在 IIFE 中</p>
</li>
</ul>
<figure data-rehype-pretty-code-figure=""><pre style="background-color:#fff;color:#24292e" tabindex="0" data-language="ts" data-theme="github-light"><code data-language="ts" data-theme="github-light" style="display:grid"><span data-line=""><span style="color:#6A737D">// cjs需要注意两个exports本质是一个对象</span></span>
<span data-line=""><span style="color:#005CC5">exports</span><span style="color:#D73A49"> =</span><span style="color:#005CC5"> module</span><span style="color:#24292E">.</span><span style="color:#005CC5">exports</span><span style="color:#24292E">(</span><span style="color:#D73A49">function</span><span style="color:#24292E"> (</span></span>
<span data-line=""><span style="color:#E36209">  exports</span><span style="color:#24292E">,</span></span>
<span data-line=""><span style="color:#E36209">  require</span><span style="color:#24292E">,</span></span>
<span data-line=""><span style="color:#E36209">  module</span><span style="color:#24292E">,</span></span>
<span data-line=""><span style="color:#E36209">  __filename</span><span style="color:#24292E">,</span></span>
<span data-line=""><span style="color:#E36209">  __dirname</span><span style="color:#24292E">,</span></span>
<span data-line=""><span style="color:#24292E">) {</span></span>
<span data-line=""><span style="color:#D73A49">  var</span><span style="color:#24292E"> dep1 </span><span style="color:#D73A49">=</span><span style="color:#6F42C1"> require</span><span style="color:#24292E">(</span><span style="color:#032F62">&#x27;dep1&#x27;</span><span style="color:#24292E">)</span></span>
<span data-line=""><span style="color:#D73A49">  var</span><span style="color:#24292E"> dep2 </span><span style="color:#D73A49">=</span><span style="color:#6F42C1"> require</span><span style="color:#24292E">(</span><span style="color:#032F62">&#x27;dep2&#x27;</span><span style="color:#24292E">)</span></span>
<span data-line=""><span style="color:#6A737D">  // 模块代码写在这里</span></span>
<span data-line=""><span style="color:#6A737D">  // ...</span></span>
<span data-line=""><span style="color:#005CC5">  module</span><span style="color:#24292E">.</span><span style="color:#005CC5">exports</span><span style="color:#D73A49"> =</span><span style="color:#24292E"> {</span></span>
<span data-line=""><span style="color:#24292E">    name: </span><span style="color:#032F62">&#x27;我是cjs模块&#x27;</span><span style="color:#24292E">,</span></span>
<span data-line=""><span style="color:#24292E">  }</span></span>
<span data-line=""><span style="color:#24292E">})</span></span></code></pre></figure>
<h3 id="amdcmd"><a class="autolink-headings" href="#amdcmd"><span style="margin-right:4px">#</span></a>amd/cmd</h3>
<p>所以有了 amd/cmd 规范，异步加载，适合浏览器环境</p>
<p>但是 loader 未被浏览器官方实现，所以需要用 loader 库，比如 requirejs</p>
<p>不支持<code>Tree Shaking</code>，只能全量打包</p>
<p>目前已经很少使用了</p>
<figure data-rehype-pretty-code-figure=""><pre style="background-color:#fff;color:#24292e" tabindex="0" data-language="ts" data-theme="github-light"><code data-language="ts" data-theme="github-light" style="display:grid"><span data-line=""><span style="color:#6F42C1">define</span><span style="color:#24292E">([</span><span style="color:#032F62">&#x27;dep1&#x27;</span><span style="color:#24292E">, </span><span style="color:#032F62">&#x27;dep2&#x27;</span><span style="color:#24292E">], </span><span style="color:#D73A49">function</span><span style="color:#24292E"> (</span><span style="color:#E36209">dep1</span><span style="color:#24292E">, </span><span style="color:#E36209">dep2</span><span style="color:#24292E">) {</span></span>
<span data-line=""><span style="color:#6A737D">  // 模块代码写在这里</span></span>
<span data-line=""><span style="color:#6A737D">  // ...</span></span>
<span data-line=""><span style="color:#D73A49">  return</span><span style="color:#D73A49"> function</span><span style="color:#24292E"> () {</span></span>
<span data-line=""><span style="color:#D73A49">    return</span><span style="color:#24292E"> {</span></span>
<span data-line=""><span style="color:#24292E">      name: </span><span style="color:#032F62">&#x27;我是cjs模块&#x27;</span><span style="color:#24292E">,</span></span>
<span data-line=""><span style="color:#24292E">    }</span></span>
<span data-line=""><span style="color:#24292E">  }</span></span>
<span data-line=""><span style="color:#24292E">})</span></span></code></pre></figure>
<h3 id="umd"><a class="autolink-headings" href="#umd"><span style="margin-right:4px">#</span></a>umd</h3>
<p>umd 是 cjs 与 amd/cmd 的集多家之长版本，并不是一个规范</p>
<p>通过判断规范来进行统一执行</p>
<p>因为其通用性，现在仍然用于 react 发包等</p>
<figure data-rehype-pretty-code-figure=""><pre style="background-color:#fff;color:#24292e" tabindex="0" data-language="ts" data-theme="github-light"><code data-language="ts" data-theme="github-light" style="display:grid"><span data-line=""><span style="color:#24292E">;(</span><span style="color:#D73A49">function</span><span style="color:#24292E"> (</span><span style="color:#E36209">root</span><span style="color:#24292E">, </span><span style="color:#E36209">factory</span><span style="color:#24292E">) {</span></span>
<span data-line=""><span style="color:#D73A49">  if</span><span style="color:#24292E"> (</span><span style="color:#D73A49">typeof</span><span style="color:#005CC5"> module</span><span style="color:#D73A49"> ===</span><span style="color:#032F62"> &#x27;object&#x27;</span><span style="color:#D73A49"> &amp;&amp;</span><span style="color:#D73A49"> typeof</span><span style="color:#005CC5"> module</span><span style="color:#24292E">.</span><span style="color:#005CC5">exports</span><span style="color:#D73A49"> ===</span><span style="color:#032F62"> &#x27;object&#x27;</span><span style="color:#24292E">) {</span></span>
<span data-line=""><span style="color:#24292E">    console.</span><span style="color:#6F42C1">log</span><span style="color:#24292E">(</span><span style="color:#032F62">&#x27;是commonjs模块规范，nodejs环境&#x27;</span><span style="color:#24292E">)</span></span>
<span data-line=""><span style="color:#D73A49">    var</span><span style="color:#24292E"> dep1 </span><span style="color:#D73A49">=</span><span style="color:#6F42C1"> require</span><span style="color:#24292E">(</span><span style="color:#032F62">&#x27;dep1&#x27;</span><span style="color:#24292E">)</span></span>
<span data-line=""><span style="color:#D73A49">    var</span><span style="color:#24292E"> dep2 </span><span style="color:#D73A49">=</span><span style="color:#6F42C1"> require</span><span style="color:#24292E">(</span><span style="color:#032F62">&#x27;dep2&#x27;</span><span style="color:#24292E">)</span></span>
<span data-line=""><span style="color:#005CC5">    module</span><span style="color:#24292E">.</span><span style="color:#005CC5">exports</span><span style="color:#D73A49"> =</span><span style="color:#6F42C1"> factory</span><span style="color:#24292E">(dep1, dep2)</span></span>
<span data-line=""><span style="color:#24292E">  } </span><span style="color:#D73A49">else</span><span style="color:#D73A49"> if</span><span style="color:#24292E"> (</span><span style="color:#D73A49">typeof</span><span style="color:#24292E"> define </span><span style="color:#D73A49">===</span><span style="color:#032F62"> &#x27;function&#x27;</span><span style="color:#D73A49"> &amp;&amp;</span><span style="color:#24292E"> define.amd) {</span></span>
<span data-line=""><span style="color:#24292E">    console.</span><span style="color:#6F42C1">log</span><span style="color:#24292E">(</span><span style="color:#032F62">&#x27;是AMD模块规范，如require.js&#x27;</span><span style="color:#24292E">)</span></span>
<span data-line=""><span style="color:#6F42C1">    define</span><span style="color:#24292E">([</span><span style="color:#032F62">&#x27;dep1&#x27;</span><span style="color:#24292E">, </span><span style="color:#032F62">&#x27;dep2&#x27;</span><span style="color:#24292E">], factory)</span></span>
<span data-line=""><span style="color:#24292E">  } </span><span style="color:#D73A49">else</span><span style="color:#D73A49"> if</span><span style="color:#24292E"> (</span><span style="color:#D73A49">typeof</span><span style="color:#24292E"> define </span><span style="color:#D73A49">===</span><span style="color:#032F62"> &#x27;function&#x27;</span><span style="color:#D73A49"> &amp;&amp;</span><span style="color:#24292E"> define.cmd) {</span></span>
<span data-line=""><span style="color:#24292E">    console.</span><span style="color:#6F42C1">log</span><span style="color:#24292E">(</span><span style="color:#032F62">&#x27;是CMD模块规范，如sea.js&#x27;</span><span style="color:#24292E">)</span></span>
<span data-line=""><span style="color:#6F42C1">    define</span><span style="color:#24292E">(</span><span style="color:#D73A49">function</span><span style="color:#24292E"> (</span><span style="color:#E36209">require</span><span style="color:#24292E">, </span><span style="color:#E36209">exports</span><span style="color:#24292E">, </span><span style="color:#E36209">module</span><span style="color:#24292E">) {</span></span>
<span data-line=""><span style="color:#D73A49">      var</span><span style="color:#24292E"> dep1 </span><span style="color:#D73A49">=</span><span style="color:#6F42C1"> require</span><span style="color:#24292E">(</span><span style="color:#032F62">&#x27;dep1&#x27;</span><span style="color:#24292E">)</span></span>
<span data-line=""><span style="color:#D73A49">      var</span><span style="color:#24292E"> dep2 </span><span style="color:#D73A49">=</span><span style="color:#6F42C1"> require</span><span style="color:#24292E">(</span><span style="color:#032F62">&#x27;dep2&#x27;</span><span style="color:#24292E">)</span></span>
<span data-line=""><span style="color:#005CC5">      module</span><span style="color:#24292E">.</span><span style="color:#005CC5">exports</span><span style="color:#D73A49"> =</span><span style="color:#6F42C1"> factory</span><span style="color:#24292E">(dep1, dep2)</span></span>
<span data-line=""><span style="color:#24292E">    })</span></span>
<span data-line=""><span style="color:#24292E">  } </span><span style="color:#D73A49">else</span><span style="color:#24292E"> {</span></span>
<span data-line=""><span style="color:#24292E">    console.</span><span style="color:#6F42C1">log</span><span style="color:#24292E">(</span><span style="color:#032F62">&#x27;没有模块环境，直接挂载在全局对象上&#x27;</span><span style="color:#24292E">)</span></span>
<span data-line=""><span style="color:#24292E">    root.umdModule </span><span style="color:#D73A49">=</span><span style="color:#6F42C1"> factory</span><span style="color:#24292E">(root.require)</span></span>
<span data-line=""><span style="color:#24292E">  }</span></span>
<span data-line=""><span style="color:#24292E">})(</span><span style="color:#005CC5">this</span><span style="color:#24292E">, </span><span style="color:#D73A49">function</span><span style="color:#24292E"> (</span><span style="color:#E36209">dep1</span><span style="color:#24292E">, </span><span style="color:#E36209">dep2</span><span style="color:#24292E">) {</span></span>
<span data-line=""><span style="color:#6A737D">  // 模块代码写在这里</span></span>
<span data-line=""><span style="color:#D73A49">  return</span><span style="color:#24292E"> {</span></span>
<span data-line=""><span style="color:#24292E">    name: </span><span style="color:#032F62">&#x27;我是umd模块&#x27;</span><span style="color:#24292E">,</span></span>
<span data-line=""><span style="color:#24292E">  }</span></span>
<span data-line=""><span style="color:#24292E">})</span></span></code></pre></figure>
<h3 id="esm"><a class="autolink-headings" href="#esm"><span style="margin-right:4px">#</span></a>esm</h3>
<ul>
<li>
<p>esm 规范由 ecmascript 官方支持，基于 js 语言，所以浏览器与 node 都进行了 loader 支持</p>
</li>
<li>
<p>esm 是异步加载，适用于浏览器与 node</p>
</li>
<li>
<p>esm 导入时，会导入对象的引用</p>
</li>
<li>
<p>esm 是静态的，函数内无法使用，所以支持<code>Tree Shaking</code></p>
</li>
</ul>
<figure data-rehype-pretty-code-figure=""><pre style="background-color:#fff;color:#24292e" tabindex="0" data-language="ts" data-theme="github-light"><code data-language="ts" data-theme="github-light" style="display:grid"><span data-line=""><span style="color:#D73A49">import</span><span style="color:#24292E"> dep1 </span><span style="color:#D73A49">from</span><span style="color:#032F62"> &#x27;dep1&#x27;</span></span>
<span data-line=""><span style="color:#D73A49">import</span><span style="color:#24292E"> dep2 </span><span style="color:#D73A49">from</span><span style="color:#032F62"> &#x27;dep2&#x27;</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#D73A49">const</span><span style="color:#6F42C1"> log</span><span style="color:#D73A49"> =</span><span style="color:#24292E"> () </span><span style="color:#D73A49">=&gt;</span><span style="color:#24292E"> {</span></span>
<span data-line=""><span style="color:#24292E">  console.</span><span style="color:#6F42C1">log</span><span style="color:#24292E">(</span><span style="color:#032F62">&#x27;我是esm模块&#x27;</span><span style="color:#24292E">)</span></span>
<span data-line=""><span style="color:#24292E">}</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#D73A49">export</span><span style="color:#24292E"> { log }</span></span></code></pre></figure>
<h4 id="esm-统一大业"><a class="autolink-headings" href="#esm-统一大业"><span style="margin-right:4px">#</span></a>esm 统一大业</h4>
<p>各个库在进行仅支持 esm 的规范化</p>
<p>如</p>
<ul>
<li>chalk5 只支持 esm <a href="https://github.com/chalk/chalk">见文档</a></li>
</ul>
<h2 id="esm-与-cjs-的兼容"><a class="autolink-headings" href="#esm-与-cjs-的兼容"><span style="margin-right:4px">#</span></a>esm 与 cjs 的兼容</h2>
<p>先看一下对比</p>
<ul>
<li>
<p>esm 支持浏览器与 node | cjs 仅支持浏览器</p>
</li>
<li>
<p>esm 是异步加载 | cjs 同步加载</p>
</li>
<li>
<p>esm 导入对象的引用 | cjs 导入对象的副本</p>
</li>
<li>
<p>esm 支持<code>Tree Shaking</code> | cjs 不支持<code>Tree Shaking</code></p>
</li>
</ul>
<p>esm 可以直接引入 cjs 模块的，异步执行同步没问题，并且<code>import xxx from &#x27;xxx.cjs&#x27;</code>可以拿到全部内容（ts 需要配置 &quot;esModuleInterop&quot;: true）</p>
<p>cjs 引入 esm 则需要将 esm 改为<code>await import同步写法</code>且需要异步环境</p>
<p>而打包工具通过各自自己的方式进行了兼容</p>
<p>如</p>
<ul>
<li>webpack 将两者都打包成自己实现的 webpackRequire</li>
</ul>
<h3 id="导入包的时候是怎么区分-cjs-与-esm-文件的"><a class="autolink-headings" href="#导入包的时候是怎么区分-cjs-与-esm-文件的"><span style="margin-right:4px">#</span></a>导入包的时候是怎么区分 cjs 与 esm 文件的</h3>
<p>包可以配置 package.json 字段</p>
<figure data-rehype-pretty-code-figure=""><pre style="background-color:#fff;color:#24292e" tabindex="0" data-language="json" data-theme="github-light"><code data-language="json" data-theme="github-light" style="display:grid"><span data-line=""><span style="color:#24292E">{</span></span>
<span data-line=""><span style="color:#005CC5">  &quot;main&quot;</span><span style="color:#24292E">: </span><span style="color:#032F62">&quot;./dist/cjs/index.js&quot;</span><span style="color:#24292E">,</span></span>
<span data-line=""><span style="color:#005CC5">  &quot;module&quot;</span><span style="color:#24292E">: </span><span style="color:#032F62">&quot;./dist/esm/index.js&quot;</span></span>
<span data-line=""><span style="color:#24292E">}</span></span></code></pre></figure>
<p>还可以用 exports 字段
优先级比 main 和 module 高，也就是说，匹配上 exports 的路径就不会使用 main 和 module 的路径。</p>
<figure data-rehype-pretty-code-figure=""><pre style="background-color:#fff;color:#24292e" tabindex="0" data-language="json" data-theme="github-light"><code data-language="json" data-theme="github-light" style="display:grid"><span data-line=""><span style="color:#24292E">{</span></span>
<span data-line=""><span style="color:#005CC5">  &quot;exports&quot;</span><span style="color:#24292E">: {</span></span>
<span data-line=""><span style="color:#005CC5">    &quot;import&quot;</span><span style="color:#24292E">: </span><span style="color:#032F62">&quot;./dist/esm/index.js&quot;</span><span style="color:#24292E">,</span></span>
<span data-line=""><span style="color:#005CC5">    &quot;require&quot;</span><span style="color:#24292E">: </span><span style="color:#032F62">&quot;./dist/cjs/index.js&quot;</span></span>
<span data-line=""><span style="color:#24292E">  }</span></span>
<span data-line=""><span style="color:#24292E">}</span></span></code></pre></figure>
<h2 id="参考资料"><a class="autolink-headings" href="#参考资料"><span style="margin-right:4px">#</span></a>参考资料</h2>
<p><a href="https://es6.ruanyifeng.com/#docs/module-loader">es6</a></p>
<p align="right">23.11.23</p></div><footer class="mt-[32px]"><div class="border-divider flex justify-between border-t pt-[24px]"><div class="w-[calc(50%-4px)]"><a class="cursor-pointer border-divider hover:border-brand group block h-full w-full rounded-[8px] border px-[16px] py-[8px] transition-colors duration-300"><div class="text-text-2 text-[12px] font-[500] leading-[20px]">上一页</div><div class=" text-text-2 group-hover:text-brand overflow-hidden text-ellipsis whitespace-nowrap text-[14px] font-[500] leading-[20px] transition-colors duration-300">vite和webpack HMR</div></a></div><div class="w-[calc(50%-4px)]"><a class="cursor-pointer border-divider hover:border-brand group block h-full w-full rounded-[8px] border px-[16px] py-[8px] transition-colors duration-300"><div class="text-text-2 text-[12px] font-[500] leading-[20px]">下一页</div><div class=" text-text-2 group-hover:text-brand overflow-hidden text-ellipsis whitespace-nowrap text-[14px] font-[500] leading-[20px] transition-colors duration-300">npm包</div></a></div></div></footer></div></div><aside class="w-toc full:flex sticky top-[calc(theme(spacing.nav)+48px)] hidden h-full flex-col"><div class="border-divider pc:border-l px-[16px] font-[500]"><div class="pc:block bg-brand absolute left-0 hidden h-[18px] w-px transition-[opacity,top] duration-300" style="top:33px;opacity:0"></div><div class="text-[14px] font-[600] leading-[28px]">本页目录</div><div><div><a href="#原始的模块化" class="text-text-2 text-hover block overflow-hidden text-ellipsis whitespace-nowrap text-[13px] leading-[28px]" style="padding-left:0rem">原始的模块化</a></div><div><a href="#文件划分" class="text-text-2 text-hover block overflow-hidden text-ellipsis whitespace-nowrap text-[13px] leading-[28px]" style="padding-left:1rem">文件划分</a></div><div><a href="#命名空间" class="text-text-2 text-hover block overflow-hidden text-ellipsis whitespace-nowrap text-[13px] leading-[28px]" style="padding-left:1rem">命名空间</a></div><div><a href="#iife" class="text-text-2 text-hover block overflow-hidden text-ellipsis whitespace-nowrap text-[13px] leading-[28px]" style="padding-left:1rem">IIFE</a></div><div><a href="#cjs-amdcmd-esm-模块规范与-umd" class="text-text-2 text-hover block overflow-hidden text-ellipsis whitespace-nowrap text-[13px] leading-[28px]" style="padding-left:0rem">cjs-amd/cmd-esm 模块规范与 umd</a></div><div><a href="#commonjs" class="text-text-2 text-hover block overflow-hidden text-ellipsis whitespace-nowrap text-[13px] leading-[28px]" style="padding-left:1rem">commonJS</a></div><div><a href="#amdcmd" class="text-text-2 text-hover block overflow-hidden text-ellipsis whitespace-nowrap text-[13px] leading-[28px]" style="padding-left:1rem">amd/cmd</a></div><div><a href="#umd" class="text-text-2 text-hover block overflow-hidden text-ellipsis whitespace-nowrap text-[13px] leading-[28px]" style="padding-left:1rem">umd</a></div><div><a href="#esm" class="text-text-2 text-hover block overflow-hidden text-ellipsis whitespace-nowrap text-[13px] leading-[28px]" style="padding-left:1rem">esm</a></div><div><a href="#esm-统一大业" class="text-text-2 text-hover block overflow-hidden text-ellipsis whitespace-nowrap text-[13px] leading-[28px]" style="padding-left:2rem">esm 统一大业</a></div><div><a href="#esm-与-cjs-的兼容" class="text-text-2 text-hover block overflow-hidden text-ellipsis whitespace-nowrap text-[13px] leading-[28px]" style="padding-left:0rem">esm 与 cjs 的兼容</a></div><div><a href="#导入包的时候是怎么区分-cjs-与-esm-文件的" class="text-text-2 text-hover block overflow-hidden text-ellipsis whitespace-nowrap text-[13px] leading-[28px]" style="padding-left:1rem">导入包的时候是怎么区分 cjs 与 esm 文件的</a></div><div><a href="#参考资料" class="text-text-2 text-hover block overflow-hidden text-ellipsis whitespace-nowrap text-[13px] leading-[28px]" style="padding-left:0rem">参考资料</a></div></div></div></aside></div></div></div>
  
    <script type="module" src="/client-entry.js"></script>
    </body>
    
</html>
