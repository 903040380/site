<!doctype html>
<html>
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width,initial-scale=1.0,user-scalable=no"
    />
    <title>ZEROPRESS</title>
  <link rel="stylesheet" href="/assets/client-entry-CfIYQ-JS.css">
  <body>
    <div id="root"><header class="pc:fixed absolute left-0 top-0 z-30 w-full"><div class="border-divider bg-bg-default pc:block h-nav hidden border-b px-[12px] pt-px transition-colors duration-300"><div class="flex h-full items-center justify-between"><div class="flex h-full shrink-0 justify-start"><div class="h-full"><nav class="mx-[12px] flex h-full items-center"><a class="cursor-pointer"><img src="/logo.jpg" class="h-[24px] w-[24px]"/></a></nav></div></div><div class="flex h-full justify-end"><div class="h-full"><nav class="mx-[12px] h-full justify-end"><a class="cursor-pointer text-text-2 text-hover flex h-full items-center whitespace-nowrap text-[14px] font-[500]">http</a></nav></div><div class="h-full"><nav class="mx-[12px] h-full justify-end"><a class="cursor-pointer text-text-2 text-hover flex h-full items-center whitespace-nowrap text-[14px] font-[500]">react17</a></nav></div><div class="h-full"><nav class="mx-[12px] h-full justify-end"><a class="cursor-pointer text-text-2 text-hover flex h-full items-center whitespace-nowrap text-[14px] font-[500]">数据结构与算法</a></nav></div><div class="h-full"><nav class="mx-[12px] h-full justify-end"><a class="cursor-pointer text-brand text-hover flex h-full items-center whitespace-nowrap text-[14px] font-[500]">设计模式</a></nav></div><div class="h-full"><nav class="mx-[12px] h-full justify-end"><a class="cursor-pointer text-text-2 text-hover flex h-full items-center whitespace-nowrap text-[14px] font-[500]">笔记</a></nav></div><div class="h-full"><nav class="mx-[12px] h-full justify-end"><a class="cursor-pointer text-text-2 text-hover flex h-full items-center whitespace-nowrap text-[14px] font-[500]">总结</a></nav></div><div class="h-full"><nav class="mx-[12px] h-full justify-end"><a class="cursor-pointer text-text-2 text-hover flex h-full items-center whitespace-nowrap text-[14px] font-[500]">收集</a></nav></div><div class="h-full"><nav class="mx-[12px] h-full justify-end"><a class="cursor-pointer text-text-2 text-hover flex h-full items-center whitespace-nowrap text-[14px] font-[500]">业务</a></nav></div><div class="h-full"><nav class="mx-[4px] flex h-full items-center"><button class="bg-bg-switch border-divider hover:border-gray-1 relative h-[22px] w-[40px] rounded-[11px] border transition-colors duration-300"><div class="bg-bg-inverse shadow-1 absolute left-px top-px h-[18px] w-[18px] overflow-hidden rounded-[50%] transition-all duration-300 dark:translate-x-[18px]"><span class="*:text-text-2 *:absolute *:left-[3px] *:top-[3px] *:h-[12px] *:w-[12px] *:transition-opacity *:duration-300"><div class="icon-[carbon--sun] opacity-100 dark:opacity-0"></div><div class="icon-[carbon--moon] opacity-0 dark:opacity-100"></div></span></div></button></nav></div><div class="h-full"><nav class="mx-[12px] h-full"><a href="https://github.com/houhongxu/hhxpress" class="cursor-pointer text-text-2 text-hover flex  h-full items-center"><span class="icon-[carbon--logo-github] h-[24px] w-[24px]"></span></a></nav></div></div></div></div><div class="pc:hidden"><div class="h-nav bg-bg-default border-b px-[12px] pt-px"><div class="flex h-full items-center justify-between"><div class="flex h-full shrink-0 justify-start"><div class="h-full"><nav class="mx-[12px] flex h-full items-center"><a class="cursor-pointer"><img src="/logo.jpg" class="h-[24px] w-[24px]"/></a></nav></div></div><div class="flex h-full items-center justify-end"><div class="icon-[carbon--list] h-[24px] w-[24px] cursor-pointer"></div></div></div></div></div></header><div class="invisible opacity-0 bg-bg-default mt-nav fixed inset-0 z-50 transition-opacity duration-300"><div class="mt-[12px]"><div class="flex items-center justify-center py-[4px]"><nav class="mx-[12px] h-full justify-end"><a class="cursor-pointer text-text-2 text-hover flex h-full items-center whitespace-nowrap text-[14px] font-[500]">http</a></nav></div><div class="flex items-center justify-center py-[4px]"><nav class="mx-[12px] h-full justify-end"><a class="cursor-pointer text-text-2 text-hover flex h-full items-center whitespace-nowrap text-[14px] font-[500]">react17</a></nav></div><div class="flex items-center justify-center py-[4px]"><nav class="mx-[12px] h-full justify-end"><a class="cursor-pointer text-text-2 text-hover flex h-full items-center whitespace-nowrap text-[14px] font-[500]">数据结构与算法</a></nav></div><div class="flex items-center justify-center py-[4px]"><nav class="mx-[12px] h-full justify-end"><a class="cursor-pointer text-brand text-hover flex h-full items-center whitespace-nowrap text-[14px] font-[500]">设计模式</a></nav></div><div class="flex items-center justify-center py-[4px]"><nav class="mx-[12px] h-full justify-end"><a class="cursor-pointer text-text-2 text-hover flex h-full items-center whitespace-nowrap text-[14px] font-[500]">笔记</a></nav></div><div class="flex items-center justify-center py-[4px]"><nav class="mx-[12px] h-full justify-end"><a class="cursor-pointer text-text-2 text-hover flex h-full items-center whitespace-nowrap text-[14px] font-[500]">总结</a></nav></div><div class="flex items-center justify-center py-[4px]"><nav class="mx-[12px] h-full justify-end"><a class="cursor-pointer text-text-2 text-hover flex h-full items-center whitespace-nowrap text-[14px] font-[500]">收集</a></nav></div><div class="flex items-center justify-center py-[4px]"><nav class="mx-[12px] h-full justify-end"><a class="cursor-pointer text-text-2 text-hover flex h-full items-center whitespace-nowrap text-[14px] font-[500]">业务</a></nav></div><div class="flex items-center justify-center py-[4px]"><nav class="mx-[4px] flex h-full items-center"><button class="bg-bg-switch border-divider hover:border-gray-1 relative h-[22px] w-[40px] rounded-[11px] border transition-colors duration-300"><div class="bg-bg-inverse shadow-1 absolute left-px top-px h-[18px] w-[18px] overflow-hidden rounded-[50%] transition-all duration-300 dark:translate-x-[18px]"><span class="*:text-text-2 *:absolute *:left-[3px] *:top-[3px] *:h-[12px] *:w-[12px] *:transition-opacity *:duration-300"><div class="icon-[carbon--sun] opacity-100 dark:opacity-0"></div><div class="icon-[carbon--moon] opacity-0 dark:opacity-100"></div></span></div></button></nav></div><div class="flex items-center justify-center py-[4px]"><nav class="mx-[12px] h-full"><a href="https://github.com/houhongxu/hhxpress" class="cursor-pointer text-text-2 text-hover flex  h-full items-center"><span class="icon-[carbon--logo-github] h-[24px] w-[24px]"></span></a></nav></div></div></div><div class="pt-nav"><aside class="mt-nav w-sidebar border-divider bg-bg-sidebar pc:-translate-x-0 fixed inset-y-0 left-0 -translate-x-full overflow-y-auto border-r px-[28px] py-[16px] transition-transform duration-300"><div class="border-divider mt-[4px] border-t first:mt-0 first:border-t-0"><h2 class="text-text-1 mb-[6px] mt-[12px] flex cursor-pointer items-center justify-between font-[700]"><span>介绍</span><span class="rotate-90 icon-[carbon--chevron-right] transition-transform duration-300"></span></h2><div style="height:27px" class="mb-[12px] flex flex-col overflow-hidden pl-[1rem] transition-[height] duration-300"><a class="cursor-pointer text-text-2 text-hover text-overflow mb-[2px] p-[2px] text-[14px]">设计模式的道与术</a></div></div><div class="border-divider mt-[4px] border-t first:mt-0 first:border-t-0"><h2 class="text-text-1 mb-[6px] mt-[12px] flex cursor-pointer items-center justify-between font-[700]"><span>创建型</span><span class="rotate-90 icon-[carbon--chevron-right] transition-transform duration-300"></span></h2><div style="height:108px" class="mb-[12px] flex flex-col overflow-hidden pl-[1rem] transition-[height] duration-300"><a class="cursor-pointer text-text-2 text-hover text-overflow mb-[2px] p-[2px] text-[14px]">简单工厂</a><a class="cursor-pointer text-text-2 text-hover text-overflow mb-[2px] p-[2px] text-[14px]">抽象工厂</a><a class="cursor-pointer text-text-2 text-hover text-overflow mb-[2px] p-[2px] text-[14px]">单例模式</a><a class="cursor-pointer text-text-2 text-hover text-overflow mb-[2px] p-[2px] text-[14px]">原型模式</a></div></div><div class="border-divider mt-[4px] border-t first:mt-0 first:border-t-0"><h2 class="text-text-1 mb-[6px] mt-[12px] flex cursor-pointer items-center justify-between font-[700]"><span>结构型</span><span class="rotate-90 icon-[carbon--chevron-right] transition-transform duration-300"></span></h2><div style="height:81px" class="mb-[12px] flex flex-col overflow-hidden pl-[1rem] transition-[height] duration-300"><a class="cursor-pointer text-brand text-hover text-overflow mb-[2px] p-[2px] text-[14px]">装饰器模式</a><a class="cursor-pointer text-text-2 text-hover text-overflow mb-[2px] p-[2px] text-[14px]">适配器模式</a><a class="cursor-pointer text-text-2 text-hover text-overflow mb-[2px] p-[2px] text-[14px]">代理模式</a></div></div><div class="border-divider mt-[4px] border-t first:mt-0 first:border-t-0"><h2 class="text-text-1 mb-[6px] mt-[12px] flex cursor-pointer items-center justify-between font-[700]"><span>行为型</span><span class="rotate-90 icon-[carbon--chevron-right] transition-transform duration-300"></span></h2><div style="height:81px" class="mb-[12px] flex flex-col overflow-hidden pl-[1rem] transition-[height] duration-300"><a class="cursor-pointer text-text-2 text-hover text-overflow mb-[2px] p-[2px] text-[14px]">策略模式</a><a class="cursor-pointer text-text-2 text-hover text-overflow mb-[2px] p-[2px] text-[14px]">状态模式</a><a class="cursor-pointer text-text-2 text-hover text-overflow mb-[2px] p-[2px] text-[14px]">观察者模式</a></div></div><div class="border-divider mt-[4px] border-t first:mt-0 first:border-t-0"><h2 class="text-text-1 mb-[6px] mt-[12px] flex cursor-pointer items-center justify-between font-[700]"><a class="cursor-pointer">readme</a></h2></div></aside><div class="pc:ml-sidebar ml-0 flex justify-between"><div class="mx-auto w-full max-w-[768px] transition-[margin] duration-300"><div class="h-nav pc:hidden bg-bg-default sticky top-0 z-40 w-full border-b"><div class="flex h-full items-center justify-between px-[24px]"><a class="icon-[carbon--container-image] h-[24px] w-[24px] cursor-pointer"></a><a class="icon-[carbon--border-top] h-[24px] w-[24px] cursor-pointer"></a></div><div class="fixed inset-0 bg-[#00000060] transition-all duration-300 opacity-0 invisible"></div><aside class="w-sidebar border-divider bg-bg-sidebar fixed inset-y-0 left-0 overflow-y-auto border-r px-[28px] py-[16px] transition-transform duration-300 -translate-x-full"><div class="border-divider mt-[4px] border-t first:mt-0 first:border-t-0"><h2 class="text-text-1 mb-[6px] mt-[12px] flex cursor-pointer items-center justify-between font-[700]"><span>介绍</span><span class="rotate-90 icon-[carbon--chevron-right] transition-transform duration-300"></span></h2><div style="height:27px" class="mb-[12px] flex flex-col overflow-hidden pl-[1rem] transition-[height] duration-300"><a class="cursor-pointer text-text-2 text-hover text-overflow mb-[2px] p-[2px] text-[14px]">设计模式的道与术</a></div></div><div class="border-divider mt-[4px] border-t first:mt-0 first:border-t-0"><h2 class="text-text-1 mb-[6px] mt-[12px] flex cursor-pointer items-center justify-between font-[700]"><span>创建型</span><span class="rotate-90 icon-[carbon--chevron-right] transition-transform duration-300"></span></h2><div style="height:108px" class="mb-[12px] flex flex-col overflow-hidden pl-[1rem] transition-[height] duration-300"><a class="cursor-pointer text-text-2 text-hover text-overflow mb-[2px] p-[2px] text-[14px]">简单工厂</a><a class="cursor-pointer text-text-2 text-hover text-overflow mb-[2px] p-[2px] text-[14px]">抽象工厂</a><a class="cursor-pointer text-text-2 text-hover text-overflow mb-[2px] p-[2px] text-[14px]">单例模式</a><a class="cursor-pointer text-text-2 text-hover text-overflow mb-[2px] p-[2px] text-[14px]">原型模式</a></div></div><div class="border-divider mt-[4px] border-t first:mt-0 first:border-t-0"><h2 class="text-text-1 mb-[6px] mt-[12px] flex cursor-pointer items-center justify-between font-[700]"><span>结构型</span><span class="rotate-90 icon-[carbon--chevron-right] transition-transform duration-300"></span></h2><div style="height:81px" class="mb-[12px] flex flex-col overflow-hidden pl-[1rem] transition-[height] duration-300"><a class="cursor-pointer text-brand text-hover text-overflow mb-[2px] p-[2px] text-[14px]">装饰器模式</a><a class="cursor-pointer text-text-2 text-hover text-overflow mb-[2px] p-[2px] text-[14px]">适配器模式</a><a class="cursor-pointer text-text-2 text-hover text-overflow mb-[2px] p-[2px] text-[14px]">代理模式</a></div></div><div class="border-divider mt-[4px] border-t first:mt-0 first:border-t-0"><h2 class="text-text-1 mb-[6px] mt-[12px] flex cursor-pointer items-center justify-between font-[700]"><span>行为型</span><span class="rotate-90 icon-[carbon--chevron-right] transition-transform duration-300"></span></h2><div style="height:81px" class="mb-[12px] flex flex-col overflow-hidden pl-[1rem] transition-[height] duration-300"><a class="cursor-pointer text-text-2 text-hover text-overflow mb-[2px] p-[2px] text-[14px]">策略模式</a><a class="cursor-pointer text-text-2 text-hover text-overflow mb-[2px] p-[2px] text-[14px]">状态模式</a><a class="cursor-pointer text-text-2 text-hover text-overflow mb-[2px] p-[2px] text-[14px]">观察者模式</a></div></div><div class="border-divider mt-[4px] border-t first:mt-0 first:border-t-0"><h2 class="text-text-1 mb-[6px] mt-[12px] flex cursor-pointer items-center justify-between font-[700]"><a class="cursor-pointer">readme</a></h2></div></aside><div class="fixed inset-0 bg-[#00000060] transition-all duration-300 opacity-0 invisible"></div><aside class="w-toc border-divider bg-bg-sidebar fixed inset-y-0 right-0 h-full border-l px-[28px] py-[16px] transition-transform duration-300 translate-x-full"><div class="border-divider pc:border-l px-[16px] font-[500]"><div class="pc:block bg-brand absolute left-0 hidden h-[18px] w-px transition-[opacity,top] duration-300" style="top:33px;opacity:0"></div><div class="text-[14px] font-[600] leading-[28px]">本页目录</div><div><div><a href="#es-中的装饰器还在提案" class="text-text-2 text-hover text-overflow block text-[13px] leading-[28px]" style="padding-left:0rem">ES 中的装饰器还在提案</a></div><div><a href="#装饰器语法糖" class="text-text-2 text-hover text-overflow block text-[13px] leading-[28px]" style="padding-left:0rem">装饰器语法糖</a></div><div><a href="#生产实践" class="text-text-2 text-hover text-overflow block text-[13px] leading-[28px]" style="padding-left:0rem">生产实践</a></div><div><a href="#高阶组件-hoc" class="text-text-2 text-hover text-overflow block text-[13px] leading-[28px]" style="padding-left:1rem">高阶组件 HOC</a></div><div><a href="#redux-的-connect" class="text-text-2 text-hover text-overflow block text-[13px] leading-[28px]" style="padding-left:1rem">Redux 的 connect</a></div><div><a href="#小结" class="text-text-2 text-hover text-overflow block text-[13px] leading-[28px]" style="padding-left:0rem">小结</a></div></div></div></aside></div><div class="p-[48px]"><div class="doc"><h1 id="装饰器模式"><a class="autolink-headings" href="#装饰器模式"><span style="margin-right:4px">#</span></a>装饰器模式</h1>
<p>只关心拓展出来的那部分新功能如何实现</p>
<h2 id="es-中的装饰器还在提案"><a class="autolink-headings" href="#es-中的装饰器还在提案"><span style="margin-right:4px">#</span></a>ES 中的装饰器还在提案</h2>
<figure data-rehype-pretty-code-figure=""><pre style="background-color:#fff;color:#24292e" tabindex="0" data-language="js" data-theme="github-light"><code data-language="js" data-theme="github-light" style="display:grid"><span data-line=""><span style="color:#6A737D">// 装饰器函数，它的第一个参数是目标类</span></span>
<span data-line=""><span style="color:#D73A49">function</span><span style="color:#6F42C1"> classDecorator</span><span style="color:#24292E">(</span><span style="color:#E36209">target</span><span style="color:#24292E">) {</span></span>
<span data-line=""><span style="color:#24292E">  target.hasDecorator </span><span style="color:#D73A49">=</span><span style="color:#005CC5"> true</span></span>
<span data-line=""><span style="color:#D73A49">  return</span><span style="color:#24292E"> target</span></span>
<span data-line=""><span style="color:#24292E">}</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#6A737D">// 将装饰器“安装”到Button类上</span></span>
<span data-line=""><span style="color:#24292E">@classDecorator</span></span>
<span data-line=""><span style="color:#D73A49">class</span><span style="color:#6F42C1"> Button</span><span style="color:#24292E"> {</span></span>
<span data-line=""><span style="color:#6A737D">  // Button类的相关逻辑</span></span>
<span data-line=""><span style="color:#24292E">}</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#6A737D">// 验证装饰器是否生效</span></span>
<span data-line=""><span style="color:#24292E">console.</span><span style="color:#6F42C1">log</span><span style="color:#24292E">(</span><span style="color:#032F62">&#x27;Button 是否被装饰了：&#x27;</span><span style="color:#24292E">, Button.hasDecorator)</span></span></code></pre></figure>
<p>也可以用同样的@语法糖去装饰类里面的方法</p>
<figure data-rehype-pretty-code-figure=""><pre style="background-color:#fff;color:#24292e" tabindex="0" data-language="js" data-theme="github-light"><code data-language="js" data-theme="github-light" style="display:grid"><span data-line=""><span style="color:#D73A49">function</span><span style="color:#6F42C1"> funcDecorator</span><span style="color:#24292E">(</span><span style="color:#E36209">target</span><span style="color:#24292E">, </span><span style="color:#E36209">name</span><span style="color:#24292E">, </span><span style="color:#E36209">descriptor</span><span style="color:#24292E">) {</span></span>
<span data-line=""><span style="color:#D73A49">  let</span><span style="color:#24292E"> originalMethod </span><span style="color:#D73A49">=</span><span style="color:#24292E"> descriptor.value</span></span>
<span data-line=""><span style="color:#24292E">  descriptor.</span><span style="color:#6F42C1">value</span><span style="color:#D73A49"> =</span><span style="color:#D73A49"> function</span><span style="color:#24292E"> () {</span></span>
<span data-line=""><span style="color:#24292E">    console.</span><span style="color:#6F42C1">log</span><span style="color:#24292E">(</span><span style="color:#032F62">&#x27;我是Func的装饰器逻辑&#x27;</span><span style="color:#24292E">)</span></span>
<span data-line=""><span style="color:#D73A49">    return</span><span style="color:#24292E"> originalMethod.</span><span style="color:#6F42C1">apply</span><span style="color:#24292E">(</span><span style="color:#005CC5">this</span><span style="color:#24292E">, </span><span style="color:#005CC5">arguments</span><span style="color:#24292E">)</span></span>
<span data-line=""><span style="color:#24292E">  }</span></span>
<span data-line=""><span style="color:#D73A49">  return</span><span style="color:#24292E"> descriptor</span></span>
<span data-line=""><span style="color:#24292E">}</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#D73A49">class</span><span style="color:#6F42C1"> Button</span><span style="color:#24292E"> {</span></span>
<span data-line=""><span style="color:#24292E">  @funcDecorator</span></span>
<span data-line=""><span style="color:#6F42C1">  onClick</span><span style="color:#24292E">() {</span></span>
<span data-line=""><span style="color:#24292E">    console.</span><span style="color:#6F42C1">log</span><span style="color:#24292E">(</span><span style="color:#032F62">&#x27;我是Func的原有逻辑&#x27;</span><span style="color:#24292E">)</span></span>
<span data-line=""><span style="color:#24292E">  }</span></span>
<span data-line=""><span style="color:#24292E">}</span></span></code></pre></figure>
<p>目前需要 babel 或者 ts 打包后才可以生效</p>
<h2 id="装饰器语法糖"><a class="autolink-headings" href="#装饰器语法糖"><span style="margin-right:4px">#</span></a>装饰器语法糖</h2>
<p>本质就是函数传参和调用</p>
<ul>
<li>
<p>类装饰器 就是将类传入类装饰器函数</p>
</li>
<li>
<p>类方法装饰器 就是将(类的原型对象,方法名,方法属性的描述对象)传入类方法装饰器函数</p>
</li>
</ul>
<h2 id="生产实践"><a class="autolink-headings" href="#生产实践"><span style="margin-right:4px">#</span></a>生产实践</h2>
<p>拓展功能，那么就能用装饰器来改写</p>
<p>例如：</p>
<ul>
<li>React 的 高阶组件 HOC</li>
<li>Redux 的 connect 函数</li>
</ul>
<h3 id="高阶组件-hoc"><a class="autolink-headings" href="#高阶组件-hoc"><span style="margin-right:4px">#</span></a>高阶组件 HOC</h3>
<p>高阶组件就是一个函数，且该函数接受一个组件作为参数，并返回一个新的组件</p>
<figure data-rehype-pretty-code-figure=""><pre style="background-color:#fff;color:#24292e" tabindex="0" data-language="js" data-theme="github-light"><code data-language="js" data-theme="github-light" style="display:grid"><span data-line=""><span style="color:#D73A49">const</span><span style="color:#6F42C1"> BorderHoc</span><span style="color:#D73A49"> =</span><span style="color:#24292E"> (</span><span style="color:#E36209">WrappedComponent</span><span style="color:#24292E">) </span><span style="color:#D73A49">=&gt;</span></span>
<span data-line=""><span style="color:#D73A49">  class</span><span style="color:#D73A49"> extends</span><span style="color:#6F42C1"> Component</span><span style="color:#24292E"> {</span></span>
<span data-line=""><span style="color:#6F42C1">    render</span><span style="color:#24292E">() {</span></span>
<span data-line=""><span style="color:#D73A49">      return</span><span style="color:#24292E"> (</span></span>
<span data-line=""><span style="color:#24292E">        &lt;</span><span style="color:#22863A">div</span><span style="color:#6F42C1"> style</span><span style="color:#D73A49">=</span><span style="color:#24292E">{{ border: </span><span style="color:#032F62">&#x27;solid 1px red&#x27;</span><span style="color:#24292E"> }}&gt;</span></span>
<span data-line=""><span style="color:#24292E">          &lt;</span><span style="color:#005CC5">WrappedComponent</span><span style="color:#24292E"> /&gt;</span></span>
<span data-line=""><span style="color:#24292E">        &lt;/</span><span style="color:#22863A">div</span><span style="color:#24292E">&gt;</span></span>
<span data-line=""><span style="color:#24292E">      )</span></span>
<span data-line=""><span style="color:#24292E">    }</span></span>
<span data-line=""><span style="color:#24292E">  }</span></span>
<span data-line=""><span style="color:#D73A49">export</span><span style="color:#D73A49"> default</span><span style="color:#24292E"> borderHoc</span></span></code></pre></figure>
<figure data-rehype-pretty-code-figure=""><pre style="background-color:#fff;color:#24292e" tabindex="0" data-language="js" data-theme="github-light"><code data-language="js" data-theme="github-light" style="display:grid"><span data-line=""><span style="color:#D73A49">import</span><span style="color:#24292E"> BorderHoc </span><span style="color:#D73A49">from</span><span style="color:#032F62"> &#x27;./BorderHoc&#x27;</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#6A737D">// 用BorderHoc装饰目标组件</span></span>
<span data-line=""><span style="color:#24292E">@BorderHoc</span></span>
<span data-line=""><span style="color:#D73A49">class</span><span style="color:#6F42C1"> TargetComponent</span><span style="color:#D73A49"> extends</span><span style="color:#6F42C1"> React</span><span style="color:#24292E">.</span><span style="color:#6F42C1">Component</span><span style="color:#24292E"> {</span></span>
<span data-line=""><span style="color:#6F42C1">  render</span><span style="color:#24292E">() {</span></span>
<span data-line=""><span style="color:#6A737D">    // 目标组件具体的业务逻辑</span></span>
<span data-line=""><span style="color:#24292E">  }</span></span>
<span data-line=""><span style="color:#24292E">}</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#6A737D">// export出去的其实是一个被包裹后的组件</span></span>
<span data-line=""><span style="color:#D73A49">export</span><span style="color:#D73A49"> default</span><span style="color:#24292E"> TargetComponent</span></span></code></pre></figure>
<h3 id="redux-的-connect"><a class="autolink-headings" href="#redux-的-connect"><span style="margin-right:4px">#</span></a>Redux 的 connect</h3>
<p>Redux 使用时需要调用 connect 方法来把状态和组件绑在一起</p>
<figure data-rehype-pretty-code-figure=""><pre style="background-color:#fff;color:#24292e" tabindex="0" data-language="js" data-theme="github-light"><code data-language="js" data-theme="github-light" style="display:grid"><span data-line=""><span style="color:#D73A49">class</span><span style="color:#6F42C1"> App</span><span style="color:#D73A49"> extends</span><span style="color:#6F42C1"> Component</span><span style="color:#24292E"> {</span></span>
<span data-line=""><span style="color:#6F42C1">  render</span><span style="color:#24292E">() {</span></span>
<span data-line=""><span style="color:#6A737D">    // App的业务逻辑</span></span>
<span data-line=""><span style="color:#24292E">  }</span></span>
<span data-line=""><span style="color:#24292E">}</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#D73A49">function</span><span style="color:#6F42C1"> mapStateToProps</span><span style="color:#24292E">(</span><span style="color:#E36209">state</span><span style="color:#24292E">) {</span></span>
<span data-line=""><span style="color:#6A737D">  // 假设App的状态对应状态树上的app节点</span></span>
<span data-line=""><span style="color:#D73A49">  return</span><span style="color:#24292E"> state.app</span></span>
<span data-line=""><span style="color:#24292E">}</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#D73A49">function</span><span style="color:#6F42C1"> mapDispatchToProps</span><span style="color:#24292E">(</span><span style="color:#E36209">dispatch</span><span style="color:#24292E">) {</span></span>
<span data-line=""><span style="color:#6A737D">  // 这段看不懂也没关系，下面会有解释。重点理解connect的调用即可</span></span>
<span data-line=""><span style="color:#D73A49">  return</span><span style="color:#6F42C1"> bindActionCreators</span><span style="color:#24292E">(action, dispatch)</span></span>
<span data-line=""><span style="color:#24292E">}</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#6A737D">// 把App组件与Redux绑在一起</span></span>
<span data-line=""><span style="color:#D73A49">export</span><span style="color:#D73A49"> default</span><span style="color:#6F42C1"> connect</span><span style="color:#24292E">(mapStateToProps, mapDispatchToProps)(App)</span></span></code></pre></figure>
<figure data-rehype-pretty-code-figure=""><pre style="background-color:#fff;color:#24292e" tabindex="0" data-language="js" data-theme="github-light"><code data-language="js" data-theme="github-light" style="display:grid"><span data-line=""><span style="color:#D73A49">import</span><span style="color:#24292E"> connect </span><span style="color:#D73A49">from</span><span style="color:#032F62"> &#x27;./connect.js&#x27;</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#24292E">@connect</span></span>
<span data-line=""><span style="color:#D73A49">export</span><span style="color:#D73A49"> default</span><span style="color:#D73A49"> class</span><span style="color:#6F42C1"> App</span><span style="color:#D73A49"> extends</span><span style="color:#6F42C1"> Component</span><span style="color:#24292E"> {</span></span>
<span data-line=""><span style="color:#6F42C1">  render</span><span style="color:#24292E">() {</span></span>
<span data-line=""><span style="color:#6A737D">    // App的业务逻辑</span></span>
<span data-line=""><span style="color:#24292E">  }</span></span>
<span data-line=""><span style="color:#24292E">}</span></span></code></pre></figure>
<h2 id="小结"><a class="autolink-headings" href="#小结"><span style="margin-right:4px">#</span></a>小结</h2>
<p>不改变旧的来进行拓展</p></div><footer class="mt-[32px]"><div class="border-divider flex justify-between border-t pt-[24px]"><div class="w-[calc(50%-4px)]"><a class="cursor-pointer border-divider hover:border-brand group block h-full w-full rounded-[8px] border px-[16px] py-[8px] transition-colors duration-300"><div class="text-text-2 text-[12px] font-[500] leading-[20px]">上一页</div><div class=" text-text-2 group-hover:text-brand text-overflow text-[14px] font-[500] leading-[20px] transition-colors duration-300">原型模式</div></a></div><div class="w-[calc(50%-4px)]"><a class="cursor-pointer border-divider hover:border-brand group block h-full w-full rounded-[8px] border px-[16px] py-[8px] transition-colors duration-300"><div class="text-text-2 text-[12px] font-[500] leading-[20px]">下一页</div><div class=" text-text-2 group-hover:text-brand text-overflow text-[14px] font-[500] leading-[20px] transition-colors duration-300">适配器模式</div></a></div></div></footer></div></div><aside class="w-toc full:flex sticky top-[calc(theme(spacing.nav)+48px)] hidden h-full flex-col"><div class="border-divider pc:border-l px-[16px] font-[500]"><div class="pc:block bg-brand absolute left-0 hidden h-[18px] w-px transition-[opacity,top] duration-300" style="top:33px;opacity:0"></div><div class="text-[14px] font-[600] leading-[28px]">本页目录</div><div><div><a href="#es-中的装饰器还在提案" class="text-text-2 text-hover text-overflow block text-[13px] leading-[28px]" style="padding-left:0rem">ES 中的装饰器还在提案</a></div><div><a href="#装饰器语法糖" class="text-text-2 text-hover text-overflow block text-[13px] leading-[28px]" style="padding-left:0rem">装饰器语法糖</a></div><div><a href="#生产实践" class="text-text-2 text-hover text-overflow block text-[13px] leading-[28px]" style="padding-left:0rem">生产实践</a></div><div><a href="#高阶组件-hoc" class="text-text-2 text-hover text-overflow block text-[13px] leading-[28px]" style="padding-left:1rem">高阶组件 HOC</a></div><div><a href="#redux-的-connect" class="text-text-2 text-hover text-overflow block text-[13px] leading-[28px]" style="padding-left:1rem">Redux 的 connect</a></div><div><a href="#小结" class="text-text-2 text-hover text-overflow block text-[13px] leading-[28px]" style="padding-left:0rem">小结</a></div></div></div></aside></div></div></div>
  
    <script type="module" src="/client-entry.js"></script>
    </body>
    
</html>
